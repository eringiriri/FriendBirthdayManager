# Friend Birthday Manager - é–‹ç™ºè¨ˆç”»æ›¸ï¼ˆæ”¹è¨‚ç‰ˆï¼‰

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ç›®çš„
å‹äººã®èª•ç”Ÿæ—¥ã‚’ç®¡ç†ã—ã€ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤ã«å¸¸é§ã—ã¦é©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§é€šçŸ¥ã‚’è¡Œã†Windowsãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

### ä¸»è¦æ©Ÿèƒ½
- ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤å¸¸é§
- å‹äººæƒ…å ±ï¼ˆåå‰ã€èª•ç”Ÿæ—¥ã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã€ãƒ¡ãƒ¢ï¼‰ã®ç™»éŒ²ãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- æŸ”è»Ÿãªæ¤œç´¢æ©Ÿèƒ½ï¼ˆã‚¨ã‚¤ãƒªã‚¢ã‚¹å¯¾å¿œã€FTS5ãƒ•ãƒ«ãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢ï¼‰
- èª•ç”Ÿæ—¥ã¾ã§ã®æ—¥æ•°è¡¨ç¤ºï¼ˆã‚¢ã‚¤ã‚³ãƒ³ä¸Šï¼‰
- ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºå¯èƒ½ãªé€šçŸ¥è¨­å®šï¼ˆå…¨ä½“ãƒ»å€‹äººï¼‰
- CSV ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- å¤šè¨€èªå¯¾å¿œåŸºç›¤ï¼ˆå°†æ¥çš„ãªæ‹¡å¼µã‚’è€ƒæ…®ï¼‰

---

## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### æ¨å¥¨æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯: **C# + WPF**

| é …ç›® | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | ç†ç”± |
|------|------|-----------|------|
| è¨€èª | C# | 12.0+ | Windowsé–‹ç™ºã«æœ€é©ã€nullableå‚ç…§å‹ã€requiredä¿®é£¾å­ |
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | .NET | 8.0 LTS | é•·æœŸã‚µãƒãƒ¼ãƒˆç‰ˆã€2026å¹´11æœˆã¾ã§ã‚µãƒãƒ¼ãƒˆ |
| GUI | WPF | .NET 8çµ„ã¿è¾¼ã¿ | MVVMå¯¾å¿œã€ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚° |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | SQLite | 3.40+ | è»½é‡ã€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã€FTS5ã‚µãƒãƒ¼ãƒˆ |
| DB ã‚¢ã‚¯ã‚»ã‚¹ | Entity Framework Core | 8.0+ | å‹å®‰å…¨ã€LINQã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ |
| DI ã‚³ãƒ³ãƒ†ãƒŠ | Microsoft.Extensions.DependencyInjection | 8.0+ | ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£å‘ä¸Š |
| ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤ | Hardcodet.NotifyIcon.Wpf | 1.1.0+ | WPFç”¨ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤ãƒ©ã‚¤ãƒ–ãƒ©ãƒª |
| é€šçŸ¥ | Microsoft.Toolkit.Uwp.Notifications | 7.1.2+ | Windowsãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ |
| ãƒ­ã‚° | Serilog | 3.1.0+ | æ§‹é€ åŒ–ãƒ­ã‚°ã€ãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ› |
| ãƒ†ã‚¹ãƒˆ | xUnit + FluentAssertions + Moq | æœ€æ–° | å˜ä½“ãƒ†ã‚¹ãƒˆã€ãƒ¢ãƒƒã‚¯ |

### âš ï¸ ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹çŠ¶æ³ã«ã¤ã„ã¦

**æ³¨æ„**: é–‹ç™ºé–‹å§‹å‰ã«ä»¥ä¸‹ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æœ€æ–°çŠ¶æ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

- **Hardcodet.NotifyIcon.Wpf**: 2018å¹´ä»¥é™æ›´æ–°ãŒåœæ­¢ã—ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚ä»£æ›¿ã¨ã—ã¦ [H.NotifyIcon](https://github.com/HavenDV/H.NotifyIcon) ã®ä½¿ç”¨ã‚’æ¤œè¨ã—ã¦ãã ã•ã„ã€‚
- **Microsoft.Toolkit.Uwp.Notifications**: [CommunityToolkit.Notifications](https://www.nuget.org/packages/CommunityToolkit.WinUI.Notifications/) ã¸ã®ç§»è¡ŒãŒæ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚æœ€æ–°ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸åã¨ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚

**æ¨å¥¨æ‰‹é †**:
1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–‹å§‹å‰ã«NuGetã§å„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®æœ€çµ‚æ›´æ–°æ—¥ã‚’ç¢ºèª
2. ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒåœæ­¢ã—ã¦ã„ã‚‹å ´åˆã¯ã€ä»£æ›¿ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ¤œè¨
3. GitHub Issuesã§æ—¢çŸ¥ã®å•é¡Œã‚’ç¢ºèª

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆæ”¹è¨‚ç‰ˆï¼‰

### ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹æˆ

#### 1. `friends` ãƒ†ãƒ¼ãƒ–ãƒ«
å‹äººã®åŸºæœ¬æƒ…å ±ã‚’ç®¡ç†

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | INTEGER | PRIMARY KEY AUTOINCREMENT | å›ºæœ‰ID |
| name | TEXT | NOT NULL | å‹äººã®åå‰ |
| birth_year | INTEGER | NULL | èª•ç”Ÿå¹´ï¼ˆä¾‹: 2000ï¼‰ |
| birth_month | INTEGER | NULL CHECK(birth_month IS NULL OR (birth_month BETWEEN 1 AND 12)) | èª•ç”Ÿæœˆï¼ˆ1-12ï¼‰ |
| birth_day | INTEGER | NULL CHECK(birth_day IS NULL OR (birth_day BETWEEN 1 AND 31)) | èª•ç”Ÿæ—¥ï¼ˆ1-31ï¼‰ |
| memo | TEXT | NULL | ãƒ¡ãƒ¢ |
| notify_days_before | INTEGER | NULL CHECK(notify_days_before IS NULL OR (notify_days_before BETWEEN 1 AND 30)) | å€‹äººé€šçŸ¥è¨­å®šï¼ˆNULL=ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆä½¿ç”¨ï¼‰ |
| notify_enabled | INTEGER | NOT NULL DEFAULT 1 CHECK(notify_enabled IN (0, 1)) | é€šçŸ¥æœ‰åŠ¹ãƒ•ãƒ©ã‚° |
| notify_sound_enabled | INTEGER | NULL CHECK(notify_sound_enabled IS NULL OR (notify_sound_enabled IN (0, 1))) | éŸ³å£°é€šçŸ¥ï¼ˆNULL=ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ |
| created_at | TEXT | NOT NULL | ä½œæˆæ—¥æ™‚ï¼ˆISO 8601ï¼‰ |
| updated_at | TEXT | NOT NULL | æ›´æ–°æ—¥æ™‚ï¼ˆISO 8601ï¼‰ |

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
```sql
CREATE INDEX idx_friends_birth_month_day ON friends(birth_month, birth_day)
    WHERE birth_month IS NOT NULL AND birth_day IS NOT NULL;
CREATE INDEX idx_friends_name ON friends(name);
CREATE INDEX idx_friends_notify_enabled ON friends(notify_enabled) WHERE notify_enabled = 1;
```

**é€šçŸ¥å¯¾è±¡åˆ¤å®š**:
- `birth_month IS NOT NULL AND birth_day IS NOT NULL` ã®å ´åˆã®ã¿é€šçŸ¥å¯¾è±¡
- å¹´ã®ã¿ã€æœˆã®ã¿ã€æ—¥ã®ã¿ã®å ´åˆã¯é€šçŸ¥ã•ã‚Œãªã„

**é‡è¤‡ç™»éŒ²åˆ¶å¾¡**:
- ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã§åˆ¶å¾¡ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆ¶ç´„ã§ã¯ãªãï¼‰
- åŒååŒèª•ç”Ÿæ—¥ã®å ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º
- ãƒ¡ãƒ¢ã§åŒºåˆ¥ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã™ã‚‹ãŒã€å¼·åˆ¶ã¯ã—ãªã„

#### 2. `aliases` ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆæ­£è¦åŒ–ï¼‰
ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’åˆ¥ãƒ†ãƒ¼ãƒ–ãƒ«ã§ç®¡ç†

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | INTEGER | PRIMARY KEY AUTOINCREMENT | ã‚¨ã‚¤ãƒªã‚¢ã‚¹ID |
| friend_id | INTEGER | NOT NULL | å‹äººID |
| alias | TEXT | NOT NULL | ã‚¨ã‚¤ãƒªã‚¢ã‚¹ |
| created_at | TEXT | NOT NULL | ä½œæˆæ—¥æ™‚ï¼ˆISO 8601ï¼‰ |

**åˆ¶ç´„**:
```sql
FOREIGN KEY (friend_id) REFERENCES friends(id) ON DELETE CASCADE,
UNIQUE(friend_id, alias)
```

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
```sql
CREATE INDEX idx_aliases_friend_id ON aliases(friend_id);
CREATE INDEX idx_aliases_alias ON aliases(alias);
```

#### 3. `settings` ãƒ†ãƒ¼ãƒ–ãƒ«
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å…¨ä½“è¨­å®š

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| key | TEXT | PRIMARY KEY | è¨­å®šã‚­ãƒ¼ |
| value | TEXT | NOT NULL | è¨­å®šå€¤ï¼ˆJSONå½¢å¼ã‚‚å¯ï¼‰ |
| updated_at | TEXT | NOT NULL | æ›´æ–°æ—¥æ™‚ï¼ˆISO 8601ï¼‰ |

**åˆæœŸè¨­å®šé …ç›®**:
- `default_notify_days_before`: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé€šçŸ¥æ—¥æ•°ï¼ˆ1-30ï¼‰
- `default_notify_sound`: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆéŸ³å£°é€šçŸ¥ï¼ˆ0/1ï¼‰
- `notification_time`: é€šçŸ¥æ™‚åˆ»ï¼ˆ24æ™‚é–“å½¢å¼ã€ä¾‹: "12:00"ï¼‰
- `start_with_windows`: ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ç™»éŒ²ï¼ˆ0/1ï¼‰
- `language`: è¨€èªè¨­å®šï¼ˆ"ja-JP", "en-US" ãªã©ï¼‰
- `schema_version`: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼ˆãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ï¼‰

#### 4. `notification_history` ãƒ†ãƒ¼ãƒ–ãƒ«
é€šçŸ¥å±¥æ­´ã‚’è¨˜éŒ²ï¼ˆé‡è¤‡é€šçŸ¥é˜²æ­¢ï¼‰

| ã‚«ãƒ©ãƒ å | å‹ | åˆ¶ç´„ | èª¬æ˜ |
|---------|-----|------|------|
| id | INTEGER | PRIMARY KEY AUTOINCREMENT | å±¥æ­´ID |
| friend_id | INTEGER | NOT NULL | å‹äººID |
| notification_date | TEXT | NOT NULL | é€šçŸ¥å¯¾è±¡æ—¥ï¼ˆYYYY-MM-DDï¼‰ |
| notified_at | TEXT | NOT NULL | é€šçŸ¥å®Ÿè¡Œæ—¥æ™‚ï¼ˆISO 8601ï¼‰ |

**åˆ¶ç´„**:
```sql
FOREIGN KEY (friend_id) REFERENCES friends(id) ON DELETE CASCADE,
UNIQUE(friend_id, notification_date)
```

**ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹**:
```sql
CREATE INDEX idx_notification_history_date ON notification_history(notification_date);
```

**è‡ªå‹•å‰Šé™¤**:
- 30æ—¥ã‚ˆã‚Šå¤ã„å±¥æ­´ã¯è‡ªå‹•å‰Šé™¤ï¼ˆã‚¢ãƒ—ãƒªèµ·å‹•æ™‚ã«ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ï¼‰

**å®Ÿè£…ä¾‹**:
```csharp
public class NotificationHistoryCleanupService
{
    private readonly AppDbContext _context;
    private readonly ILogger<NotificationHistoryCleanupService> _logger;

    public async Task CleanupOldHistoryAsync()
    {
        var cutoffDate = DateTime.UtcNow.Date.AddDays(-30).ToString("yyyy-MM-dd");

        var deletedCount = await _context.Database
            .ExecuteSqlRawAsync(
                "DELETE FROM notification_history WHERE notification_date < {0}",
                cutoffDate
            );

        _logger.LogInformation("Deleted {DeletedCount} old notification history records", deletedCount);
    }
}

// ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³èµ·å‹•æ™‚ã«å®Ÿè¡Œ
public partial class App : Application
{
    protected override async void OnStartup(StartupEventArgs e)
    {
        base.OnStartup(e);

        var cleanupService = _serviceProvider.GetRequiredService<NotificationHistoryCleanupService>();
        await cleanupService.CleanupOldHistoryAsync();

        // ... (ä»–ã®èµ·å‹•å‡¦ç†)
    }
}
```

#### 5. `friends_fts` ãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆFTS5 ä»®æƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ï¼‰
é«˜é€Ÿãƒ•ãƒ«ãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢ç”¨

```sql
CREATE VIRTUAL TABLE friends_fts USING fts5(
    name,
    memo,
    content=friends,
    content_rowid=id
);

-- ãƒˆãƒªã‚¬ãƒ¼ã§friends ãƒ†ãƒ¼ãƒ–ãƒ«ã¨åŒæœŸ
-- NOTE: memoã¯NULLableã€‚FTS5ã§ã¯NULLã‚’ç©ºæ–‡å­—åˆ—ã«å¤‰æ›ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
CREATE TRIGGER friends_ai AFTER INSERT ON friends BEGIN
    INSERT INTO friends_fts(rowid, name, memo)
    VALUES (new.id, new.name, COALESCE(new.memo, ''));
END;

CREATE TRIGGER friends_ad AFTER DELETE ON friends BEGIN
    DELETE FROM friends_fts WHERE rowid = old.id;
END;

CREATE TRIGGER friends_au AFTER UPDATE ON friends BEGIN
    UPDATE friends_fts SET name = new.name, memo = COALESCE(new.memo, '')
    WHERE rowid = new.id;
END;
```

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æˆ¦ç•¥

**ã‚¹ã‚­ãƒ¼ãƒãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†**:
- `settings.schema_version` ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³è¿½è·¡
- èµ·å‹•æ™‚ã«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ã€å¿…è¦ã«å¿œã˜ã¦ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å‰ã«è‡ªå‹•ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—

**ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè£…ä¾‹**:
```csharp
public interface IDatabaseMigration
{
    int TargetVersion { get; }
    Task MigrateAsync(SqliteConnection connection);
}

public class Migration_001_AddAliasesTable : IDatabaseMigration
{
    public int TargetVersion => 1;

    public async Task MigrateAsync(SqliteConnection connection)
    {
        await using var transaction = await connection.BeginTransactionAsync();

        try
        {
            // ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä½œæˆ
            await using var cmd = connection.CreateCommand();
            cmd.CommandText = @"
                CREATE TABLE IF NOT EXISTS aliases (
                    id INTEGER PRIMARY KEY AUTOINCREMENT,
                    friend_id INTEGER NOT NULL,
                    alias TEXT NOT NULL,
                    created_at TEXT NOT NULL,
                    FOREIGN KEY (friend_id) REFERENCES friends(id) ON DELETE CASCADE,
                    UNIQUE(friend_id, alias)
                );

                CREATE INDEX IF NOT EXISTS idx_aliases_friend_id ON aliases(friend_id);
                CREATE INDEX IF NOT EXISTS idx_aliases_alias ON aliases(alias);
            ";
            await cmd.ExecuteNonQueryAsync();

            await transaction.CommitAsync();
        }
        catch
        {
            await transaction.RollbackAsync();
            throw;
        }
    }
}

public class MigrationRunner
{
    private readonly AppDbContext _context;
    private readonly ILogger<MigrationRunner> _logger;
    private readonly IEnumerable<IDatabaseMigration> _migrations;

    public MigrationRunner(
        AppDbContext context,
        ILogger<MigrationRunner> logger,
        IEnumerable<IDatabaseMigration> migrations)
    {
        _context = context;
        _logger = logger;
        _migrations = migrations.OrderBy(m => m.TargetVersion);
    }

    public async Task RunMigrationsAsync()
    {
        var currentVersion = await GetCurrentSchemaVersionAsync();
        _logger.LogInformation("Current schema version: {Version}", currentVersion);

        foreach (var migration in _migrations.Where(m => m.TargetVersion > currentVersion))
        {
            _logger.LogInformation("Running migration to version {Version}", migration.TargetVersion);

            // ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
            await CreateBackupAsync();

            try
            {
                var connection = (SqliteConnection)_context.Database.GetDbConnection();
                await connection.OpenAsync();
                await migration.MigrateAsync(connection);
                await SetSchemaVersionAsync(migration.TargetVersion);

                _logger.LogInformation("Migration to version {Version} completed", migration.TargetVersion);
            }
            catch (Exception ex)
            {
                _logger.LogError(ex, "Migration to version {Version} failed", migration.TargetVersion);
                throw;
            }
        }
    }

    private async Task<int> GetCurrentSchemaVersionAsync()
    {
        var version = await _context.Settings
            .Where(s => s.Key == "schema_version")
            .Select(s => s.Value)
            .FirstOrDefaultAsync();

        return int.TryParse(version, out var v) ? v : 0;
    }

    private async Task SetSchemaVersionAsync(int version)
    {
        var setting = await _context.Settings.FindAsync("schema_version");
        if (setting == null)
        {
            _context.Settings.Add(new Setting
            {
                Key = "schema_version",
                Value = version.ToString(),
                UpdatedAt = DateTime.UtcNow
            });
        }
        else
        {
            setting.Value = version.ToString();
            setting.UpdatedAt = DateTime.UtcNow;
        }

        await _context.SaveChangesAsync();
    }

    private async Task CreateBackupAsync()
    {
        var dbPath = _context.Database.GetDbConnection().DataSource;
        var backupPath = $"{dbPath}.backup_{DateTime.Now:yyyyMMddHHmmss}";

        await Task.Run(() => File.Copy(dbPath, backupPath, overwrite: false));
        _logger.LogInformation("Database backup created: {BackupPath}", backupPath);
    }
}
```

---

## ğŸ¨ UIè¨­è¨ˆè©³ç´°

### ç”»é¢A: ãƒ¡ã‚¤ãƒ³ç”»é¢ï¼ˆèª•ç”Ÿæ—¥è¿½åŠ ï¼‰
**ãƒˆãƒªã‚¬ãƒ¼**: ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã€ã¾ãŸã¯å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€Œèª•ç”Ÿæ—¥è¿½åŠ ã€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‹äººã®èª•ç”Ÿæ—¥ã‚’è¿½åŠ                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åå‰: *å¿…é ˆ                              â”‚
â”‚ [____________________________________]  â”‚
â”‚                                         â”‚
â”‚ èª•ç”Ÿæ—¥:                                  â”‚
â”‚ [YYYY] / [MM] / [DD]                   â”‚
â”‚ (DatePickerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½¿ç”¨)           â”‚
â”‚ [ ] æœˆæ—¥ã®ã¿ç™»éŒ²ï¼ˆå¹´ã‚’çœç•¥ï¼‰             â”‚
â”‚                                         â”‚
â”‚ ã‚¨ã‚¤ãƒªã‚¢ã‚¹:                              â”‚
â”‚ [____________________________________]  â”‚
â”‚ [+ ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã‚’è¿½åŠ ]                     â”‚
â”‚                                         â”‚
â”‚ ãƒ¡ãƒ¢:                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚                                  â”‚   â”‚
â”‚ â”‚                                  â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚ é€šçŸ¥è¨­å®š: [â–¼ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã‚’ä½¿ç”¨ â–¼]     â”‚
â”‚           (1~30æ—¥å‰, ã¾ãŸã¯é€šçŸ¥ãªã—)     â”‚
â”‚                                         â”‚
â”‚        [ç™»éŒ²]        [ä¸€è¦§è¡¨ç¤º]         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ“… ç›´è¿‘ã®èª•ç”Ÿæ—¥ï¼ˆæœ€å¤§5ä»¶ï¼‰                â”‚
â”‚                                         â”‚
â”‚ 1. å±±ç”°å¤ªéƒ                              â”‚
â”‚    2025å¹´11æœˆ20æ—¥ï¼ˆã‚ã¨ 6æ—¥ï¼‰            â”‚
â”‚                                         â”‚
â”‚ 2. ä½è—¤èŠ±å­                              â”‚
â”‚    2025å¹´11æœˆ25æ—¥ï¼ˆã‚ã¨ 11æ—¥ï¼‰           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ©Ÿèƒ½**:
- å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ**åå‰ã®ã¿å¿…é ˆ**ã€ãã®ä»–ä»»æ„ï¼‰
- èª•ç”Ÿæ—¥å…¥åŠ›: 3ã¤ã®ç‹¬ç«‹ã—ãŸãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
  - å¹´: [____] (ä¾‹: 2000) â† ä»»æ„
  - æœˆ: [__] (1-12) â† ä»»æ„
  - æ—¥: [__] (1-31) â† ä»»æ„
  - ğŸ’¡ æœˆã¨æ—¥ã®ä¸¡æ–¹ã‚’å…¥åŠ›ã™ã‚‹ã¨é€šçŸ¥å¯¾è±¡ã«ãªã‚‹
- ã‚¨ã‚¤ãƒªã‚¢ã‚¹: å‹•çš„ã«è¿½åŠ å¯èƒ½ï¼ˆå€‹åˆ¥ã®å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ï¼‰
- ç›´è¿‘5ä»¶ã®èª•ç”Ÿæ—¥ã‚’è¡¨ç¤ºï¼ˆ**BirthMonth ã¨ BirthDay ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹å‹äººã®ã¿**ï¼‰
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆå¯¾å¿œï¼ˆCtrl+N: æ–°è¦ç™»éŒ²ã€Ctrl+L: ä¸€è¦§è¡¨ç¤ºï¼‰

**ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**:
- åå‰: 1æ–‡å­—ä»¥ä¸Šã€200æ–‡å­—ä»¥ä¸‹
- å¹´: 1900-2100ã®ç¯„å›²ï¼ˆä»»æ„ï¼‰
- æœˆ: 1-12ã®ç¯„å›²ï¼ˆä»»æ„ï¼‰
- æ—¥: 1-31ã®ç¯„å›²ï¼ˆä»»æ„ï¼‰ã€ã†ã‚‹ã†å¹´è€ƒæ…®
- ã‚¨ã‚¤ãƒªã‚¢ã‚¹: å„50æ–‡å­—ä»¥ä¸‹
- ãƒ¡ãƒ¢: 5000æ–‡å­—ä»¥ä¸‹

**ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿å­˜**:
- å¹´ãƒ»æœˆãƒ»æ—¥ã¯å€‹åˆ¥ã®INTEGERã‚«ãƒ©ãƒ ã«ä¿å­˜
- ã“ã‚Œã«ã‚ˆã‚Šã€Œ5æœˆç”Ÿã¾ã‚Œã€ã¨ã€Œ5æ—¥ç”Ÿã¾ã‚Œã€ãŒæ˜ç¢ºã«åŒºåˆ¥ã•ã‚Œã‚‹

---

### ç”»é¢B: ä¸€è¦§è¡¨ç¤ºç”»é¢
**ãƒˆãƒªã‚¬ãƒ¼**: ã€Œä¸€è¦§è¡¨ç¤ºã€ãƒœã‚¿ãƒ³ã€ã¾ãŸã¯å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€Œä¸€è¦§è¡¨ç¤ºã€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‹äººä¸€è¦§                                      [Ã—] [â–¡] [_] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ” [_______________________]   [ğŸ”½ è¿‘ã„é †]   [ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ]â”‚
â”‚     å³æ™‚æ¤œç´¢ï¼ˆåå‰/ã‚¨ã‚¤ãƒªã‚¢ã‚¹/ãƒ¡ãƒ¢ï¼‰                      â”‚
â”‚                                                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚    åå‰      â”‚ èª•ç”Ÿæ—¥    â”‚ ã‚ã¨  â”‚ é€šçŸ¥ â”‚          â”‚  â”‚
â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
â”‚ â”‚ å±±ç”°å¤ªéƒ     â”‚11æœˆ20æ—¥   â”‚ 6æ—¥   â”‚ ğŸ””  â”‚ [ç·¨é›†]  â”‚  â”‚
â”‚ â”‚ ä½è—¤èŠ±å­     â”‚11æœˆ25æ—¥   â”‚ 11æ—¥  â”‚ ğŸ””  â”‚ [ç·¨é›†]  â”‚  â”‚
â”‚ â”‚ éˆ´æœ¨ä¸€éƒ     â”‚12æœˆ1æ—¥    â”‚ 17æ—¥  â”‚ ğŸ”•  â”‚ [ç·¨é›†]  â”‚  â”‚
â”‚ â”‚ ç”°ä¸­æ¬¡éƒ     â”‚ï¼ˆæœªè¨­å®šï¼‰  â”‚ ï¼   â”‚ ï¼  â”‚ [ç·¨é›†]  â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                          â”‚
â”‚ ç·ä»¶æ•°: 42ä»¶  è¡¨ç¤º: 4ä»¶                          [é–‰ã˜ã‚‹] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ©Ÿèƒ½**:
- **å³æ™‚æ¤œç´¢**: FTS5ã«ã‚ˆã‚‹é«˜é€Ÿãƒ•ãƒ«ãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢
  - åå‰ã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã€ãƒ¡ãƒ¢ã‚’æ¨ªæ–­æ¤œç´¢
  - å…¥åŠ›ä¸­ã«ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
- **ä¸¦ã³æ›¿ãˆ**:
  - è¿‘ã„é †: ä»Šæ—¥ã‹ã‚‰èª•ç”Ÿæ—¥ã¾ã§ã®æ—¥æ•°ï¼ˆæ˜‡é †ï¼‰ã€èª•ç”Ÿæ—¥æœªè¨­å®šã¯æœ€å¾Œ
    - åŒæ—¥ã®å ´åˆã¯åå‰é †ï¼ˆUnicodeé †ã§ã‚½ãƒ¼ãƒˆã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã§å®Ÿè£…ï¼‰
  - æ—¥ä»˜é †: 1æœˆ1æ—¥â†’12æœˆ31æ—¥ï¼ˆæœˆæ—¥ã®ã¿ã§åˆ¤å®šï¼‰ã€åŒæ—¥ã¯åå‰é †
  - åå‰é †: Unicodeé †ï¼ˆC#ã®string.Compareä½¿ç”¨ï¼‰
- **åå‰ã‚¯ãƒªãƒƒã‚¯**: ç·¨é›†ç”»é¢ï¼ˆç”»é¢Cï¼‰ã¸é·ç§»
- **å‰Šé™¤**: ç·¨é›†ç”»é¢ã‹ã‚‰å®Ÿè¡Œï¼ˆèª¤æ“ä½œé˜²æ­¢ã®ãŸã‚ä¸€è¦§ã‹ã‚‰ç›´æ¥å‰Šé™¤ä¸å¯ï¼‰
- **é€šçŸ¥ã‚¢ã‚¤ã‚³ãƒ³**: ğŸ””ï¼ˆæœ‰åŠ¹ï¼‰ã€ğŸ”•ï¼ˆç„¡åŠ¹ï¼‰
- **ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³**: 100ä»¶ä»¥ä¸Šã®å ´åˆã€ä»®æƒ³åŒ–ãƒªã‚¹ãƒˆä½¿ç”¨ï¼ˆãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å¯¾ç­–ï¼‰
- **ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£**: ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

---

### ç”»é¢C: ç·¨é›†ç”»é¢
**ãƒˆãƒªã‚¬ãƒ¼**: ä¸€è¦§ç”»é¢ã§åå‰ã‚’ã‚¯ãƒªãƒƒã‚¯

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‹äººæƒ…å ±ã®ç·¨é›†                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ åå‰: *å¿…é ˆ                              â”‚
â”‚ [å±±ç”°å¤ªéƒ__________________________]    â”‚
â”‚                                         â”‚
â”‚ èª•ç”Ÿæ—¥:                                  â”‚
â”‚ [2000] / [05] / [15]                   â”‚
â”‚ [ ] æœˆæ—¥ã®ã¿ç™»éŒ²                         â”‚
â”‚                                         â”‚
â”‚ ã‚¨ã‚¤ãƒªã‚¢ã‚¹:                              â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ tarou                     [å‰Šé™¤] â”‚    â”‚
â”‚ â”‚ taro                      [å‰Šé™¤] â”‚    â”‚
â”‚ â”‚ ãŸã‚ãƒ¼                     [å‰Šé™¤] â”‚    â”‚
â”‚ â”‚ [æ–°ã—ã„ã‚¨ã‚¤ãƒªã‚¢ã‚¹...] [+ è¿½åŠ ]  â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚ ãƒ¡ãƒ¢:                                    â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚é«˜æ ¡æ™‚ä»£ã®å‹äºº                     â”‚   â”‚
â”‚ â”‚å¥½ããªã‚‚ã®: ãƒ©ãƒ¼ãƒ¡ãƒ³               â”‚   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                         â”‚
â”‚ é€šçŸ¥è¨­å®š:                                â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚ â”‚ [â–¼ 3æ—¥å‰ã‹ã‚‰ â–¼]  [ğŸ”” é€šçŸ¥ ON ]  â”‚    â”‚
â”‚ â”‚ [â˜‘ éŸ³ã‚’é³´ã‚‰ã™]                   â”‚    â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                         â”‚
â”‚    [ä¿å­˜]    [å‰Šé™¤]    [ã‚­ãƒ£ãƒ³ã‚»ãƒ«]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**æ©Ÿèƒ½**:
- é€šçŸ¥ãƒˆã‚°ãƒ«ãƒœã‚¿ãƒ³ï¼ˆON/OFFï¼‰
- å€‹äººé€šçŸ¥è¨­å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã€1~30æ—¥å‰ï¼‰
- éŸ³å£°é€šçŸ¥ã®å€‹åˆ¥è¨­å®š
- ã‚¨ã‚¤ãƒªã‚¢ã‚¹å€‹åˆ¥è¿½åŠ ãƒ»å‰Šé™¤
- å‰Šé™¤ãƒœã‚¿ãƒ³: ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºï¼ˆã€Œæœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“ã€‚ã€ï¼‰
- å¤‰æ›´æ¤œçŸ¥: æœªä¿å­˜ã®å¤‰æ›´ãŒã‚ã‚‹å ´åˆã€é–‰ã˜ã‚‹æ™‚ã«ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°

---

### ç”»é¢D: è¨­å®šç”»é¢
**ãƒˆãƒªã‚¬ãƒ¼**: å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€Œè¨­å®šã€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ è¨­å®š                        [ã‚¿ãƒ–UIå®Ÿè£…] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [é€šçŸ¥] [èµ·å‹•] [ãƒ‡ãƒ¼ã‚¿] [è©³ç´°]            â”‚
â”‚                                         â”‚
â”‚ ã€é€šçŸ¥è¨­å®šã€‘                             â”‚
â”‚                                         â”‚
â”‚ é€šçŸ¥æ™‚åˆ»:                                â”‚
â”‚   [ğŸ• 12] : [00]  (TimePickerä½¿ç”¨)      â”‚
â”‚                                         â”‚
â”‚ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé€šçŸ¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°:                â”‚
â”‚   [â–¼ 1æ—¥å‰ã‹ã‚‰ â–¼] (1~30æ—¥å‰ã‹ã‚‰é¸æŠ)    â”‚
â”‚   â€» é¸æŠã—ãŸæ—¥æ•°å‰ã‹ã‚‰èª•ç”Ÿæ—¥å½“æ—¥ã¾ã§     â”‚
â”‚      æ¯æ—¥1å›ã€ä¸Šè¨˜æ™‚åˆ»ã«é€šçŸ¥             â”‚
â”‚                                         â”‚
â”‚ ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆéŸ³å£°é€šçŸ¥:                      â”‚
â”‚   [â˜‘] éŸ³ã‚’é³´ã‚‰ã™                        â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã€èµ·å‹•è¨­å®šã€‘                             â”‚
â”‚                                         â”‚
â”‚   [â˜‘] Windowsã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ã«ç™»éŒ²       â”‚
â”‚   ï¼ˆã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ä½¿ç”¨ã€UACä¸è¦ï¼‰    â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã€ãƒ‡ãƒ¼ã‚¿ç®¡ç†ã€‘                           â”‚
â”‚                                         â”‚
â”‚   [CSVã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ]                    â”‚
â”‚   [CSVã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ]                      â”‚
â”‚   [ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—]           â”‚
â”‚                                         â”‚
â”‚   â€» ã‚¤ãƒ³ãƒãƒ¼ãƒˆã¯æœ¬ãƒ„ãƒ¼ãƒ«å‡ºåŠ›CSVé™å®š      â”‚
â”‚   â€» å¤§å®¹é‡ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ10MBä»¥ä¸Šï¼‰ã¯è­¦å‘Š     â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ã€è©³ç´°è¨­å®šã€‘                             â”‚
â”‚                                         â”‚
â”‚   è¨€èª: [â–¼ æ—¥æœ¬èª â–¼]                    â”‚
â”‚   ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«: [â–¼ Information â–¼]        â”‚
â”‚   ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹: C:\Users\...\friends.db â”‚
â”‚   ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹: C:\Users\...\logs\   â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              [ä¿å­˜]        [é–‰ã˜ã‚‹]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¤‰æ›´ç‚¹**:
- TimePicker UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä½¿ç”¨ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã‚’å»ƒæ­¢ï¼‰
- é€šçŸ¥ã¯**1æ—¥1å›ã®ã¿**ã«å¤‰æ›´ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼è² æ‹…è»½æ¸›ï¼‰
- ã‚¿ãƒ–UIã§ã‚«ãƒ†ã‚´ãƒªåˆ†ã‘ï¼ˆè¦–èªæ€§å‘ä¸Šï¼‰
- è©³ç´°è¨­å®šã‚¿ãƒ–è¿½åŠ ï¼ˆè¨€èªã€ãƒ­ã‚°ã€ãƒ‘ã‚¹è¡¨ç¤ºï¼‰

---

### ç”»é¢E: ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ
**ãƒˆãƒªã‚¬ãƒ¼**: å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã€Œã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Friend Birthday Manager ã«ã¤ã„ã¦         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚        Friend Birthday Manager          â”‚
â”‚               Version 1.0.0             â”‚
â”‚                                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚                                         â”‚
â”‚ åˆ¶ä½œè€…: ãˆã‚Šã‚“ã                         â”‚
â”‚                                         â”‚
â”‚ Twitter: @eringi_vrc                    â”‚
â”‚   (ã‚¯ãƒªãƒƒã‚¯ã§ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‚’é–‹ã)          â”‚
â”‚                                         â”‚
â”‚ é€£çµ¡å…ˆ: eringi@eringi.me                â”‚
â”‚                                         â”‚
â”‚ ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰: [GitHub ã‚¢ã‚¤ã‚³ãƒ³]          â”‚
â”‚   (ã‚¯ãƒªãƒƒã‚¯ã§ãƒªãƒã‚¸ãƒˆãƒªã‚’é–‹ã)            â”‚
â”‚                                         â”‚
â”‚ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹: MIT License                  â”‚
â”‚                                         â”‚
â”‚                  [é–‰ã˜ã‚‹]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤ã‚¢ã‚¤ã‚³ãƒ³

#### å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ èª•ç”Ÿæ—¥ã‚’è¿½åŠ  (Ctrl+N) â”‚ â†’ ç”»é¢A
â”‚ ä¸€è¦§è¡¨ç¤º (Ctrl+L)     â”‚ â†’ ç”»é¢B
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ è¨­å®š               â”‚ â†’ ç”»é¢D
â”‚ ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆ         â”‚ â†’ ç”»é¢E
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ çµ‚äº†               â”‚ â†’ ã‚¢ãƒ—ãƒªçµ‚äº†
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤ºä»•æ§˜
- **1~9æ—¥ä»¥å†…ã«èª•ç”Ÿæ—¥ãŒã‚ã‚‹å ´åˆ**: å¯¾å¿œã™ã‚‹æ—¥æ•°ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¡¨ç¤ºï¼ˆä¾‹: `1.ico`, `2.ico`, ..., `9.ico`ï¼‰
- **10æ—¥ä»¥ä¸Šå…ˆã€ã¾ãŸã¯èª•ç”Ÿæ—¥å½“æ—¥ã®å ´åˆ**: ã‚±ãƒ¼ã‚­ã‚¢ã‚¤ã‚³ãƒ³ã‚’è¡¨ç¤ºï¼ˆ`birthday.ico`ï¼‰
- **ã‚¢ã‚¤ã‚³ãƒ³ã‚µã‚¤ã‚º**: 16x16pxï¼ˆæ¨™æº–ï¼‰ã€32x32pxï¼ˆé«˜DPIï¼‰ã€48x48pxï¼ˆè¶…é«˜DPIï¼‰
- **å½¢å¼**: ICOå½¢å¼ï¼ˆãƒãƒ«ãƒã‚µã‚¤ã‚ºå¯¾å¿œï¼‰
- **æº–å‚™ãŒå¿…è¦ãªã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«**:
  - `Resources/Icons/birthday.ico` - èª•ç”Ÿæ—¥ã‚±ãƒ¼ã‚­ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
  - `Resources/Icons/1.ico` - æ•°å­—1
  - `Resources/Icons/2.ico` - æ•°å­—2
  - `Resources/Icons/3.ico` - æ•°å­—3
  - `Resources/Icons/4.ico` - æ•°å­—4
  - `Resources/Icons/5.ico` - æ•°å­—5
  - `Resources/Icons/6.ico` - æ•°å­—6
  - `Resources/Icons/7.ico` - æ•°å­—7
  - `Resources/Icons/8.ico` - æ•°å­—8
  - `Resources/Icons/9.ico` - æ•°å­—9

---

## ğŸ”” é€šçŸ¥æ©Ÿèƒ½ã®è©³ç´°ï¼ˆæ”¹è¨‚ç‰ˆï¼‰

### é€šçŸ¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°
- **è¨­å®šã§æŒ‡å®šã—ãŸæ™‚åˆ»ã«1æ—¥1å›ãƒã‚§ãƒƒã‚¯**ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 12:00 æ­£åˆï¼‰
- å„å‹äººã«ã¤ã„ã¦ã€Œä»Šæ—¥ãŒé€šçŸ¥æ—¥ã‹ã€ã‚’åˆ¤å®š
- **é€šçŸ¥å¯¾è±¡**: æœˆæ—¥ãŒç™»éŒ²ã•ã‚Œã¦ã„ã‚‹å‹äººã®ã¿ï¼ˆå¹´ã¯ä»»æ„ï¼‰

### é€šçŸ¥å†…å®¹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‚ å‹äººã®èª•ç”Ÿæ—¥ãŒè¿‘ã¥ã„ã¦ã„ã¾ã™     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å±±ç”°å¤ªéƒã•ã‚“ã®èª•ç”Ÿæ—¥ã¾ã§ ã‚ã¨3æ—¥    â”‚
â”‚ èª•ç”Ÿæ—¥: 11æœˆ20æ—¥                   â”‚
â”‚                                    â”‚
â”‚ [è©³ç´°ã‚’è¦‹ã‚‹]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- **éŸ³å£°**: Windows æ¨™æº–é€šçŸ¥éŸ³ã€ã¾ãŸã¯è¨­å®šã§OFF
- **ã‚¯ãƒªãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: ç·¨é›†ç”»é¢ï¼ˆç”»é¢Cï¼‰ã‚’é–‹ã

### é€šçŸ¥ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆé‡è¦ï¼‰

**ã€ŒXæ—¥å‰ã‹ã‚‰é€šçŸ¥ã€= ã€ŒXæ—¥å‰ã®æ—¥ã‹ã‚‰èª•ç”Ÿæ—¥å½“æ—¥ã¾ã§æ¯æ—¥1å›ã€è¨­å®šæ™‚åˆ»ã«é€šçŸ¥ã€**

```
ä¾‹: å±±ç”°å¤ªéƒã•ã‚“ (èª•ç”Ÿæ—¥: 5æœˆ15æ—¥)
     å€‹äººè¨­å®š=3æ—¥å‰ã‹ã‚‰é€šçŸ¥
     é€šçŸ¥æ™‚åˆ»=12:00

- 5æœˆ12æ—¥ 12:00 â†’ ã€Œå±±ç”°å¤ªéƒã•ã‚“ (5/15) ã¾ã§ã‚ã¨3æ—¥ã€
- 5æœˆ13æ—¥ 12:00 â†’ ã€Œå±±ç”°å¤ªéƒã•ã‚“ (5/15) ã¾ã§ã‚ã¨2æ—¥ã€
- 5æœˆ14æ—¥ 12:00 â†’ ã€Œå±±ç”°å¤ªéƒã•ã‚“ (5/15) ã¾ã§ã‚ã¨1æ—¥ã€
- 5æœˆ15æ—¥ 12:00 â†’ ã€Œä»Šæ—¥ã¯å±±ç”°å¤ªéƒã•ã‚“ã®èª•ç”Ÿæ—¥ã§ã™ï¼ğŸ‰ã€
```

**é‡è¤‡é˜²æ­¢**:
- `notification_history` ãƒ†ãƒ¼ãƒ–ãƒ«ã«è¨˜éŒ²
- `(friend_id, notification_date)` ã®çµ„ã¿åˆã‚ã›ã§åˆ¤å®š
- åŒæ—¥ã«è¤‡æ•°å›é€šçŸ¥ã•ã‚Œã‚‹ã“ã¨ã¯ãªã„

**é€šçŸ¥å¯¾è±¡ã®åˆ¤å®š**:
```csharp
public bool ShouldNotifyToday(Friend friend, DateTime today, int daysBefore)
{
    if (!friend.NotifyEnabled) return false;
    if (!friend.BirthMonth.HasValue || !friend.BirthDay.HasValue) return false; // æœˆæ—¥ãŒå¿…è¦

    var nextBirthday = CalculateNextBirthday(today, friend.BirthMonth.Value, friend.BirthDay.Value);
    var daysUntil = (nextBirthday.Date - today.Date).Days; // æ™‚åˆ»éƒ¨åˆ†ã‚’é™¤å¤–ã—ã¦è¨ˆç®—

    return daysUntil >= 0 && daysUntil <= daysBefore;
}
```

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**:
- é€šçŸ¥APIå‘¼ã³å‡ºã—å¤±æ•—æ™‚ã¯ãƒ­ã‚°ã«è¨˜éŒ²ã€æ¬¡å›ãƒªãƒˆãƒ©ã‚¤
- 3å›é€£ç¶šå¤±æ•—ã—ãŸå ´åˆã¯ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤ã«ã‚¨ãƒ©ãƒ¼ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤º

---

## ğŸ” æ¤œç´¢æ©Ÿèƒ½ã®è©³ç´°ï¼ˆæ”¹è¨‚ç‰ˆï¼‰

### SQLite FTS5ã«ã‚ˆã‚‹é«˜é€Ÿæ¤œç´¢

**FTS5ã®åˆ©ç‚¹**:
- éƒ¨åˆ†ä¸€è‡´æ¤œç´¢ãŒé«˜é€Ÿ
- ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ã«ã‚ˆã‚‹æŸ”è»Ÿãªæ¤œç´¢
- ãƒ©ãƒ³ã‚­ãƒ³ã‚°æ©Ÿèƒ½ï¼ˆé–¢é€£åº¦é †ï¼‰

**æ¤œç´¢ã‚¯ã‚¨ãƒªä¾‹**:
```csharp
// åå‰ãƒ»ãƒ¡ãƒ¢ã®ãƒ•ãƒ«ãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢
var friendsFromFts = await dbContext.Database
    .SqlQuery<int>($"SELECT rowid FROM friends_fts WHERE friends_fts MATCH {keyword}")
    .ToListAsync();

// ã‚¨ã‚¤ãƒªã‚¢ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰æ¤œç´¢
var friendsFromAlias = await dbContext.Aliases
    .Where(a => a.Alias.Contains(keyword))
    .Select(a => a.FriendId)
    .ToListAsync();

// çµæœã‚’ãƒãƒ¼ã‚¸
var friendIds = friendsFromFts.Union(friendsFromAlias).Distinct();
var friends = await dbContext.Friends
    .Where(f => friendIds.Contains(f.Id))
    .ToListAsync();
```

### æ¤œç´¢å¯¾è±¡ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- åå‰ï¼ˆFTS5ï¼‰
- ã‚¨ã‚¤ãƒªã‚¢ã‚¹ï¼ˆæ­£è¦åŒ–ã•ã‚ŒãŸãƒ†ãƒ¼ãƒ–ãƒ«ã‹ã‚‰æ¤œç´¢ï¼‰
- ãƒ¡ãƒ¢ï¼ˆFTS5ï¼‰

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™
- 1,000ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã§æ¤œç´¢å¿œç­”æ™‚é–“ < 50ms
- 10,000ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã§æ¤œç´¢å¿œç­”æ™‚é–“ < 200ms

---

## ğŸ§© ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆï¼ˆæ”¹è¨‚ç‰ˆï¼‰

### MVVM + DI ãƒ‘ã‚¿ãƒ¼ãƒ³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    View     â”‚  (XAML)
â”‚  (UI Layer) â”‚  - ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  - ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å±æ€§
       â”‚ Data Binding, Commands
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  ViewModel  â”‚  (INotifyPropertyChanged)
â”‚             â”‚  - CommunityToolkit.Mvvmä½¿ç”¨
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  - [ObservableProperty], [RelayCommand]
       â”‚ DIæ³¨å…¥
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚  Services   â”‚  (Business Logic)
â”‚             â”‚  - NotificationService
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  - TrayIconService
       â”‚         - CsvService
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚ Repository  â”‚  (Data Access Layer)
â”‚             â”‚  - IFriendRepository
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  - ISettingsRepository
       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
â”‚   EF Core   â”‚  (ORM)
â”‚   SQLite    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Dependency Injectionè¨­å®š

```csharp
// App.xaml.cs
public partial class App : Application
{
    private readonly IServiceProvider _serviceProvider;

    public App()
    {
        var services = new ServiceCollection();
        ConfigureServices(services);
        _serviceProvider = services.BuildServiceProvider();
    }

    private void ConfigureServices(IServiceCollection services)
    {
        // DbContext
        services.AddDbContext<AppDbContext>(options =>
            options.UseSqlite("Data Source=friends.db"));

        // Repositories
        services.AddScoped<IFriendRepository, FriendRepository>();
        services.AddScoped<ISettingsRepository, SettingsRepository>();

        // Services
        // NOTE: NotificationServiceã¨TrayIconServiceã¯Singletonã ãŒã€
        // DbContextã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯IServiceProviderã‚’æ³¨å…¥ã—ã¦ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä½œæˆã™ã‚‹
        services.AddSingleton<INotificationService, NotificationService>();
        services.AddSingleton<ITrayIconService, TrayIconService>();
        services.AddScoped<ICsvService, CsvService>();
        services.AddScoped<IStartupService, StartupService>();

        // ViewModels
        services.AddTransient<MainViewModel>();
        services.AddTransient<ListViewModel>();
        services.AddTransient<EditViewModel>();
        services.AddTransient<SettingsViewModel>();

        // Logging
        services.AddLogging(builder =>
        {
            builder.AddSerilog(new LoggerConfiguration()
                .WriteTo.File("logs/app.log", rollingInterval: RollingInterval.Day)
                .CreateLogger());
        });
    }
}
```

### ä¸»è¦ã‚¯ãƒ©ã‚¹è¨­è¨ˆï¼ˆæ”¹è¨‚ç‰ˆï¼‰

#### Model

```csharp
public class Friend
{
    public int Id { get; set; }

    public required string Name { get; set; }  // C# 11+ requiredä¿®é£¾å­

    public int? BirthYear { get; set; }   // èª•ç”Ÿå¹´ï¼ˆä¾‹: 2000ï¼‰
    public int? BirthMonth { get; set; }  // èª•ç”Ÿæœˆï¼ˆ1-12ï¼‰
    public int? BirthDay { get; set; }    // èª•ç”Ÿæ—¥ï¼ˆ1-31ï¼‰

    public string? Memo { get; set; }

    public int? NotifyDaysBefore { get; set; }  // NULL = use default

    public bool NotifyEnabled { get; set; } = true;

    public bool? NotifySoundEnabled { get; set; }  // NULL = use default

    public DateTime CreatedAt { get; set; }

    public DateTime UpdatedAt { get; set; }

    // Navigation properties
    public ICollection<Alias> Aliases { get; set; } = new List<Alias>();

    // ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰
    public bool HasValidBirthdayForNotification()
    {
        // æœˆã¨æ—¥ã®ä¸¡æ–¹ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿é€šçŸ¥å¯¾è±¡
        return BirthMonth.HasValue && BirthDay.HasValue;
    }

    public int? CalculateDaysUntilBirthday(DateTime referenceDate)
    {
        if (!HasValidBirthdayForNotification()) return null;

        int year = referenceDate.Year;
        int month = BirthMonth!.Value;
        int day = BirthDay!.Value;

        // ã†ã‚‹ã†å¹´å‡¦ç†: 2æœˆ29æ—¥ç”Ÿã¾ã‚Œã§å¹³å¹´ã®å ´åˆã¯2æœˆ28æ—¥ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
        if (month == 2 && day == 29 && !DateTime.IsLeapYear(year))
        {
            day = 28;
        }

        var nextBirthday = new DateTime(year, month, day);

        if (nextBirthday < referenceDate)
        {
            // æ¥å¹´ã®èª•ç”Ÿæ—¥ã‚’è¨ˆç®—ï¼ˆã†ã‚‹ã†å¹´å‡¦ç†ã‚’å†é©ç”¨ï¼‰
            year++;
            if (month == 2 && BirthDay == 29 && !DateTime.IsLeapYear(year))
            {
                day = 28;
            }
            else
            {
                day = BirthDay!.Value;
            }
            nextBirthday = new DateTime(year, month, day);
        }

        return (nextBirthday - referenceDate).Days;
    }

    // è¡¨ç¤ºç”¨ã®èª•ç”Ÿæ—¥æ–‡å­—åˆ—ã‚’ç”Ÿæˆ
    public string GetBirthdayDisplayString()
    {
        if (BirthYear.HasValue && BirthMonth.HasValue && BirthDay.HasValue)
            return $"{BirthYear:0000}-{BirthMonth:00}-{BirthDay:00}";
        if (BirthMonth.HasValue && BirthDay.HasValue)
            return $"{BirthMonth:00}-{BirthDay:00}";
        if (BirthYear.HasValue)
            return $"{BirthYear}å¹´";
        if (BirthMonth.HasValue)
            return $"{BirthMonth}æœˆ";
        if (BirthDay.HasValue)
            return $"{BirthDay}æ—¥";
        return "æœªè¨­å®š";
    }
}

public class Alias
{
    public int Id { get; set; }
    public int FriendId { get; set; }
    public required string Alias { get; set; }
    public DateTime CreatedAt { get; set; }

    // Navigation property
    public Friend Friend { get; set; } = null!;
}

public class AppSettings
{
    public int DefaultNotifyDaysBefore { get; set; } = 1;
    public bool DefaultNotifySound { get; set; } = true;
    public TimeSpan NotificationTime { get; set; } = new TimeSpan(12, 0, 0);
    public bool StartWithWindows { get; set; } = false;
    public string Language { get; set; } = "ja-JP";
}
```

#### Repository

```csharp
public interface IFriendRepository
{
    Task<List<Friend>> GetAllAsync();
    Task<Friend?> GetByIdAsync(int id);
    Task<int> AddAsync(Friend friend);
    Task UpdateAsync(Friend friend);
    Task DeleteAsync(int id);
    Task<List<Friend>> SearchAsync(string keyword);
    Task<List<Friend>> GetUpcomingBirthdaysAsync(DateTime referenceDate, int count);
}

public interface ISettingsRepository
{
    Task<string?> GetAsync(string key);
    Task SetAsync(string key, string value);
    Task<AppSettings> GetAppSettingsAsync();
    Task SaveAppSettingsAsync(AppSettings settings);
    Task<int> GetSchemaVersionAsync();
    Task SetSchemaVersionAsync(int version);
}
```

#### Service

```csharp
public interface INotificationService
{
    Task CheckAndNotifyAsync(CancellationToken cancellationToken = default);
    Task<bool> ShowNotificationAsync(Friend friend, int daysUntil);
}

// å®Ÿè£…ä¾‹: Singletonã‚µãƒ¼ãƒ“ã‚¹ã§ScopedãªDbContextã‚’ä½¿ç”¨ã™ã‚‹æ–¹æ³•
public class NotificationService : INotificationService
{
    private readonly IServiceProvider _serviceProvider;
    private readonly ILogger<NotificationService> _logger;

    public NotificationService(IServiceProvider serviceProvider, ILogger<NotificationService> logger)
    {
        _serviceProvider = serviceProvider;
        _logger = logger;
    }

    public async Task CheckAndNotifyAsync(CancellationToken cancellationToken = default)
    {
        // ã‚¹ã‚³ãƒ¼ãƒ—ã‚’ä½œæˆã—ã¦DbContextã‚’å–å¾—
        using var scope = _serviceProvider.CreateScope();
        var friendRepository = scope.ServiceProvider.GetRequiredService<IFriendRepository>();

        var friends = await friendRepository.GetAllAsync();
        // é€šçŸ¥å‡¦ç†...
    }
}

public interface ITrayIconService
{
    void Initialize();
    void UpdateIcon(int? daysUntilNextBirthday);
    void ShowBalloonTip(string title, string message);
    void Dispose();
}

public interface ICsvService
{
    Task<bool> ExportAsync(string filePath);
    Task<ImportResult> ImportAsync(string filePath);
}

public record ImportResult(
    int SuccessCount,
    int SkippedCount,
    List<string> Errors
);
```

---

## ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

### 1. SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–
- **Entity Framework Coreä½¿ç”¨**ã«ã‚ˆã‚Šã€ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒªãŒè‡ªå‹•ç”Ÿæˆã•ã‚Œã‚‹
- ç”ŸSQLã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯å¿…ãš `SqlParameter` ã‚’ä½¿ç”¨

### 2. CSVã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®æ¤œè¨¼
```csharp
public async Task<ImportResult> ImportAsync(string filePath)
{
    // ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãƒã‚§ãƒƒã‚¯ï¼ˆ10MBåˆ¶é™ï¼‰
    var fileInfo = new FileInfo(filePath);
    if (fileInfo.Length > 10 * 1024 * 1024)
        throw new InvalidOperationException("ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºãŒå¤§ãã™ãã¾ã™ï¼ˆ10MBä»¥ä¸‹ï¼‰");

    // è¡Œæ•°ãƒã‚§ãƒƒã‚¯ï¼ˆDoSå¯¾ç­–ï¼‰
    var lineCount = File.ReadLines(filePath).Count();
    if (lineCount > 100_000)
        throw new InvalidOperationException("ãƒ‡ãƒ¼ã‚¿ä»¶æ•°ãŒå¤šã™ãã¾ã™ï¼ˆ10ä¸‡ä»¶ä»¥ä¸‹ï¼‰");

    // å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®é•·ã•æ¤œè¨¼
    // Excelæ•°å¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ã®å®Ÿè£…ã¯ä¸‹è¨˜CsvServiceã‚’å‚ç…§
}

// Excelæ•°å¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ã®å®Ÿè£…ä¾‹
public string SanitizeForCsv(string value)
{
    if (string.IsNullOrEmpty(value))
        return value;

    // =, +, -, @ã§å§‹ã¾ã‚‹ã‚»ãƒ«ã«'ã‚’ä»˜åŠ ã—ã¦ç„¡å®³åŒ–
    if (value.StartsWith("=") || value.StartsWith("+") ||
        value.StartsWith("-") || value.StartsWith("@"))
    {
        return "'" + value;
    }

    return value;
}

public async Task<bool> ExportAsync(string filePath)
{
    var friends = await _friendRepository.GetAllAsync();

    using var writer = new StreamWriter(filePath, false, new UTF8Encoding(true)); // BOMä»˜ã
    using var csv = new CsvWriter(writer, CultureInfo.InvariantCulture);

    // ãƒ˜ãƒƒãƒ€ãƒ¼æ›¸ãè¾¼ã¿
    await csv.WriteFieldAsync("name");
    await csv.WriteFieldAsync("birth_year");
    // ... (ä»–ã®ãƒ˜ãƒƒãƒ€ãƒ¼)
    await csv.NextRecordAsync();

    // ãƒ‡ãƒ¼ã‚¿æ›¸ãè¾¼ã¿ï¼ˆExcelæ•°å¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–é©ç”¨ï¼‰
    foreach (var friend in friends)
    {
        await csv.WriteFieldAsync(SanitizeForCsv(friend.Name));
        await csv.WriteFieldAsync(friend.BirthYear?.ToString() ?? "");
        await csv.WriteFieldAsync(friend.BirthMonth?.ToString() ?? "");
        await csv.WriteFieldAsync(friend.BirthDay?.ToString() ?? "");

        var aliases = string.Join(",", friend.Aliases.Select(a => SanitizeForCsv(a.Alias)));
        await csv.WriteFieldAsync(aliases);

        await csv.WriteFieldAsync(SanitizeForCsv(friend.Memo ?? ""));
        // ... (ä»–ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰)
        await csv.NextRecordAsync();
    }

    return true;
}
```

### 3. ãƒ‘ã‚¹æ“ä½œã®å®‰å…¨æ€§
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ‘ã‚¹ã€ãƒ­ã‚°ãƒ‘ã‚¹ã¯ç›¸å¯¾ãƒ‘ã‚¹ã¾ãŸã¯çµ¶å¯¾ãƒ‘ã‚¹ã§æŒ‡å®šå¯èƒ½
- ãƒ‘ã‚¹ãƒˆãƒ©ãƒãƒ¼ã‚µãƒ«æ”»æ’ƒã‚’é˜²ããŸã‚ã€å¤–éƒ¨å…¥åŠ›ã‚’å—ã‘ä»˜ã‘ã‚‹å ´åˆã¯ `Path.GetFullPath()` ã§æ­£è¦åŒ–

---

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
- ã™ã§ã«è¨­è¨ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§å®šç¾©æ¸ˆã¿
- å®šæœŸçš„ã« `ANALYZE` ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œï¼ˆçµ±è¨ˆæƒ…å ±æ›´æ–°ï¼‰

### 2. UIä»®æƒ³åŒ–
- 100ä»¶ä»¥ä¸Šã®ãƒªã‚¹ãƒˆè¡¨ç¤ºæ™‚ã¯ `VirtualizingStackPanel` ä½¿ç”¨

### 3. éåŒæœŸå‡¦ç†
- ã™ã¹ã¦ã®DBæ“ä½œã¯éåŒæœŸï¼ˆasync/awaitï¼‰
- UI ã‚¹ãƒ¬ãƒƒãƒ‰ã‚’ãƒ–ãƒ­ãƒƒã‚¯ã—ãªã„

### 4. ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥
- è¨­å®šæƒ…å ±ã¯ãƒ¡ãƒ¢ãƒªã‚­ãƒ£ãƒƒã‚·ãƒ¥ï¼ˆèµ·å‹•æ™‚ã«èª­ã¿è¾¼ã¿ã€å¤‰æ›´æ™‚ã®ã¿DBæ›¸ãè¾¼ã¿ï¼‰
- å‹äººãƒªã‚¹ãƒˆã¯å¤‰æ›´æ™‚ã«ç„¡åŠ¹åŒ–

### 5. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆè¨ˆç”»
- 100ä»¶ã€1,000ä»¶ã€10,000ä»¶ã®ãƒ‡ãƒ¼ã‚¿ã‚»ãƒƒãƒˆã§ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯
- èµ·å‹•æ™‚é–“ < 3ç§’
- æ¤œç´¢å¿œç­”æ™‚é–“: 1,000ä»¶ < 50msã€10,000ä»¶ < 200ms

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥ï¼ˆæ‹¡å……ç‰ˆï¼‰

### 1. å˜ä½“ãƒ†ã‚¹ãƒˆï¼ˆxUnitï¼‰

**ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™**: 80%ä»¥ä¸Š

```csharp
public class FriendTests
{
    [Theory]
    [InlineData(2000, 5, 15, true)]    // å¹´æœˆæ—¥ â†’ é€šçŸ¥å¯èƒ½
    [InlineData(null, 5, 15, true)]    // æœˆæ—¥ã®ã¿ â†’ é€šçŸ¥å¯èƒ½
    [InlineData(2000, null, null, false)]  // å¹´ã®ã¿ â†’ é€šçŸ¥ä¸å¯
    [InlineData(null, 5, null, false)]     // æœˆã®ã¿ â†’ é€šçŸ¥ä¸å¯
    [InlineData(null, null, 15, false)]    // æ—¥ã®ã¿ â†’ é€šçŸ¥ä¸å¯
    [InlineData(null, null, null, false)]  // æœªå…¥åŠ› â†’ é€šçŸ¥ä¸å¯
    public void HasValidBirthdayForNotification_ReturnsExpected(
        int? year, int? month, int? day, bool expected)
    {
        var friend = new Friend
        {
            Name = "Test",
            BirthYear = year,
            BirthMonth = month,
            BirthDay = day
        };
        friend.HasValidBirthdayForNotification().Should().Be(expected);
    }

    [Theory]
    [InlineData(2000, 5, 15, "2000-05-15")]   // å®Œå…¨å½¢å¼
    [InlineData(null, 5, 15, "05-15")]        // æœˆæ—¥ã®ã¿
    [InlineData(2000, null, null, "2000å¹´")]  // å¹´ã®ã¿
    [InlineData(null, 5, null, "5æœˆ")]        // æœˆã®ã¿
    [InlineData(null, null, 15, "15æ—¥")]      // æ—¥ã®ã¿
    [InlineData(null, null, null, "æœªè¨­å®š")]  // æœªå…¥åŠ›
    public void GetBirthdayDisplayString_ReturnsExpected(
        int? year, int? month, int? day, string expected)
    {
        var friend = new Friend
        {
            Name = "Test",
            BirthYear = year,
            BirthMonth = month,
            BirthDay = day
        };
        friend.GetBirthdayDisplayString().Should().Be(expected);
    }

    [Fact]
    public void CalculateDaysUntilBirthday_LeapYear_ReturnsCorrectDays()
    {
        var friend = new Friend
        {
            Name = "Test",
            BirthMonth = 2,
            BirthDay = 29
        };
        var referenceDate = new DateTime(2024, 2, 28); // ã†ã‚‹ã†å¹´
        friend.CalculateDaysUntilBirthday(referenceDate).Should().Be(1);

        referenceDate = new DateTime(2023, 2, 28); // å¹³å¹´
        friend.CalculateDaysUntilBirthday(referenceDate).Should().Be(0); // 2/28ã«é€šçŸ¥
    }
}

public class NotificationServiceTests
{
    [Fact]
    public async Task CheckAndNotifyAsync_NotifiesCorrectly()
    {
        // Arrange
        var mockRepo = new Mock<IFriendRepository>();
        var mockNotification = new Mock<INotificationService>();
        // ...

        // Act
        await service.CheckAndNotifyAsync();

        // Assert
        mockNotification.Verify(x => x.ShowNotificationAsync(It.IsAny<Friend>(), 3), Times.Once);
    }
}
```

### 2. çµ±åˆãƒ†ã‚¹ãƒˆ

```csharp
public class DatabaseIntegrationTests : IDisposable
{
    private readonly AppDbContext _context;

    [Fact]
    public async Task AddFriend_WithAliases_PersistsCorrectly()
    {
        // Arrange
        var friend = new Friend
        {
            Name = "Test User",
            BirthMonth = 5,
            BirthDay = 15,
            Aliases = new List<Alias>
            {
                new() { Alias = "test1" },
                new() { Alias = "test2" }
            }
        };

        // Act
        _context.Friends.Add(friend);
        await _context.SaveChangesAsync();

        // Assert
        var retrieved = await _context.Friends
            .Include(f => f.Aliases)
            .FirstAsync(f => f.Name == "Test User");
        retrieved.Aliases.Should().HaveCount(2);
    }
}
```

### 3. UIãƒ†ã‚¹ãƒˆï¼ˆæ‰‹å‹• + è‡ªå‹•åŒ–æ¤œè¨ï¼‰

**æ‰‹å‹•ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹**:
- [ ] å‹äººç™»éŒ²â†’ä¸€è¦§è¡¨ç¤ºâ†’ç·¨é›†â†’å‰Šé™¤ã®ä¸€é€£ãƒ•ãƒ­ãƒ¼
- [ ] æ¤œç´¢æ©Ÿèƒ½ï¼ˆéƒ¨åˆ†ä¸€è‡´ã€ã‚¨ã‚¤ãƒªã‚¢ã‚¹æ¤œç´¢ï¼‰
- [ ] ä¸¦ã³æ›¿ãˆï¼ˆè¿‘ã„é †ã€æ—¥ä»˜é †ã€åå‰é †ï¼‰
- [ ] CSV ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆâ†’ã‚¤ãƒ³ãƒãƒ¼ãƒˆâ†’ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ç¢ºèª
- [ ] é€šçŸ¥è¡¨ç¤ºï¼ˆã‚¿ã‚¤ãƒŸãƒ³ã‚°ã€å†…å®¹ã€éŸ³å£°ï¼‰
- [ ] ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤ã‚¢ã‚¤ã‚³ãƒ³æ›´æ–°
- [ ] ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ç™»éŒ²â†’PCå†èµ·å‹•â†’è‡ªå‹•èµ·å‹•ç¢ºèª

**è‡ªå‹•UIãƒ†ã‚¹ãƒˆï¼ˆå°†æ¥å®Ÿè£…ï¼‰**:
- Appium for WPF / FlaUI ä½¿ç”¨ã‚’æ¤œè¨

### 4. ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆ

- [ ] ã†ã‚‹ã†å¹´ï¼ˆ2æœˆ29æ—¥ç”Ÿã¾ã‚Œã€å¹³å¹´ã®å ´åˆï¼‰
- [ ] åŒååŒèª•ç”Ÿæ—¥ã®å‹äººã‚’è¤‡æ•°ç™»éŒ²
- [ ] 1,000ä»¶ä»¥ä¸Šã®å‹äººç™»éŒ²
- [ ] ã‚¿ã‚¤ãƒ ã‚¾ãƒ¼ãƒ³å¤‰æ›´æ™‚ã®æŒ™å‹•
- [ ] ã‚·ã‚¹ãƒ†ãƒ æ™‚åˆ»ã‚’éå»ã«å¤‰æ›´
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ç ´æ
- [ ] ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ä¸è¶³
- [ ] ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å¤šé‡èµ·å‹•
- [ ] é€šçŸ¥APIå‘¼ã³å‡ºã—å¤±æ•—
- [ ] ç‰¹æ®Šæ–‡å­—ã‚’å«ã‚€åå‰ï¼ˆçµµæ–‡å­—ã€åˆ¶å¾¡æ–‡å­—ï¼‰
- [ ] è¶…é•·æ–‡ãƒ¡ãƒ¢ï¼ˆ5,000æ–‡å­—ï¼‰
- [ ] éƒ¨åˆ†å…¥åŠ›ï¼ˆå¹´ã®ã¿ã€æœˆã®ã¿ã€æ—¥ã®ã¿ï¼‰ã®å‹•ä½œç¢ºèª
- [ ] 1-12ã®æ›–æ˜§ãªæ•°å€¤ï¼ˆæœˆã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹ã‹ç¢ºèªï¼‰

---

## ğŸ“„ CSVä»•æ§˜ï¼ˆæ˜ç¢ºåŒ–ç‰ˆï¼‰

### ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

```csv
name,birth_year,birth_month,birth_day,aliases,memo,notify_days_before,notify_enabled,notify_sound_enabled
å±±ç”°å¤ªéƒ,2000,5,15,"tarou,taro,ãŸã‚ãƒ¼",é«˜æ ¡æ™‚ä»£ã®å‹äºº,3,1,1
ä½è—¤èŠ±å­,,5,25,"hanako,ã¯ãªã“","å¤§å­¦ã®å…ˆè¼©
2è¡Œç›®ã®ãƒ¡ãƒ¢",,1,
éˆ´æœ¨ä¸€éƒ,2000,,,ichiro,2000å¹´ç”Ÿã¾ã‚Œï¼ˆæœˆæ—¥ä¸æ˜ï¼‰,,,1
ç”°ä¸­èŠ±å­,,5,,hanako,5æœˆç”Ÿã¾ã‚Œï¼ˆæ—¥ä¸æ˜ï¼‰,,,1
ç”°ä¸­æ¬¡éƒ,,,,,,,,,0
```

**é‡è¦ãªå¤‰æ›´ç‚¹**:
- `birthday` ã‚«ãƒ©ãƒ ã‚’ `birth_year`, `birth_month`, `birth_day` ã®3ã‚«ãƒ©ãƒ ã«åˆ†å‰²
- ã“ã‚Œã«ã‚ˆã‚Šã€Œ5æœˆç”Ÿã¾ã‚Œã€(birth_month=5) ã¨ã€Œ5æ—¥ç”Ÿã¾ã‚Œã€(birth_day=5) ãŒæ˜ç¢ºã«åŒºåˆ¥ã§ãã‚‹

### ä»•æ§˜è©³ç´°

- **ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°**: UTF-8 BOMä»˜ã
- **æ”¹è¡Œã‚³ãƒ¼ãƒ‰**: CRLF (Windowsæ¨™æº–)
- **ãƒ˜ãƒƒãƒ€ãƒ¼è¡Œ**: å¿…é ˆ
- **NULLå€¤**: ç©ºæ¬„ï¼ˆé€£ç¶šã‚«ãƒ³ãƒï¼‰
- **ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ãƒ«ãƒ¼ãƒ«**ï¼ˆRFC 4180æº–æ‹ ï¼‰:
  - ã‚«ãƒ³ãƒã‚’å«ã‚€å€¤: ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã§å›²ã‚€
  - ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã‚’å«ã‚€å€¤: `""` ã§ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—
  - æ”¹è¡Œã‚’å«ã‚€å€¤: ãƒ€ãƒ–ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆã§å›²ã‚€
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**:
  - å¿…é ˆã‚«ãƒ©ãƒ : `name`
  - å„ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®æœ€å¤§é•·ãƒã‚§ãƒƒã‚¯
  - èª•ç”Ÿæ—¥æ¤œè¨¼: birth_year (1900-2100), birth_month (1-12), birth_day (1-31)

### ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ™‚ã®æ³¨æ„
- Excelæ•°å¼ã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–: `=`, `+`, `-`, `@` ã§å§‹ã¾ã‚‹ã‚»ãƒ«ã®å…ˆé ­ã« `'`ï¼ˆã‚·ãƒ³ã‚°ãƒ«ã‚¯ã‚©ãƒ¼ãƒˆï¼‰ã‚’ä»˜åŠ ã—ã¦ç„¡å®³åŒ–

### ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ™‚ã®æ¤œè¨¼

```csharp
public class CsvValidator
{
    public ValidationResult Validate(string[] row, int lineNumber)
    {
        // å¿…é ˆãƒã‚§ãƒƒã‚¯: nameï¼ˆrow[0]ï¼‰
        if (string.IsNullOrWhiteSpace(row[0]))
            return ValidationResult.Error($"Line {lineNumber}: Name is required");

        // é•·ã•ãƒã‚§ãƒƒã‚¯
        if (row[0].Length > 200)
            return ValidationResult.Error($"Line {lineNumber}: Name too long (max 200 chars)");

        // birth_yearï¼ˆrow[1]ï¼‰æ¤œè¨¼
        if (!string.IsNullOrEmpty(row[1]))
        {
            if (!int.TryParse(row[1], out int year) || year < 1900 || year > 2100)
                return ValidationResult.Error($"Line {lineNumber}: Invalid birth_year (1900-2100)");
        }

        // birth_monthï¼ˆrow[2]ï¼‰æ¤œè¨¼
        if (!string.IsNullOrEmpty(row[2]))
        {
            if (!int.TryParse(row[2], out int month) || month < 1 || month > 12)
                return ValidationResult.Error($"Line {lineNumber}: Invalid birth_month (1-12)");
        }

        // birth_dayï¼ˆrow[3]ï¼‰æ¤œè¨¼
        if (!string.IsNullOrEmpty(row[3]))
        {
            if (!int.TryParse(row[3], out int day) || day < 1 || day > 31)
                return ValidationResult.Error($"Line {lineNumber}: Invalid birth_day (1-31)");
        }

        return ValidationResult.Success();
    }
}

public class ValidationResult
{
    public bool IsSuccess { get; }
    public string ErrorMessage { get; }

    private ValidationResult(bool isSuccess, string errorMessage = "")
    {
        IsSuccess = isSuccess;
        ErrorMessage = errorMessage;
    }

    public static ValidationResult Success() => new ValidationResult(true);
    public static ValidationResult Error(string message) => new ValidationResult(false, message);
}
```

---

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆï¼ˆæ”¹è¨‚ç‰ˆï¼‰

```
FriendBirthdayManager/
â”‚
â”œâ”€â”€ FriendBirthdayManager.sln
â”‚
â”œâ”€â”€ src/
â”‚   â””â”€â”€ FriendBirthdayManager/
â”‚       â”œâ”€â”€ FriendBirthdayManager.csproj
â”‚       â”‚
â”‚       â”œâ”€â”€ App.xaml
â”‚       â”œâ”€â”€ App.xaml.cs                    # DIè¨­å®š
â”‚       â”‚
â”‚       â”œâ”€â”€ Models/
â”‚       â”‚   â”œâ”€â”€ Friend.cs
â”‚       â”‚   â”œâ”€â”€ Alias.cs                   # æ­£è¦åŒ–
â”‚       â”‚   â”œâ”€â”€ AppSettings.cs
â”‚       â”‚   â”œâ”€â”€ NotificationHistory.cs
â”‚       â”‚   â””â”€â”€ BirthdayComponents.cs      # èª•ç”Ÿæ—¥ãƒ‘ãƒ¼ã‚¹ç”¨
â”‚       â”‚
â”‚       â”œâ”€â”€ Views/
â”‚       â”‚   â”œâ”€â”€ MainWindow.xaml
â”‚       â”‚   â”œâ”€â”€ ListWindow.xaml
â”‚       â”‚   â”œâ”€â”€ EditWindow.xaml
â”‚       â”‚   â”œâ”€â”€ SettingsWindow.xaml
â”‚       â”‚   â””â”€â”€ AboutWindow.xaml
â”‚       â”‚
â”‚       â”œâ”€â”€ ViewModels/
â”‚       â”‚   â”œâ”€â”€ MainViewModel.cs
â”‚       â”‚   â”œâ”€â”€ ListViewModel.cs
â”‚       â”‚   â”œâ”€â”€ EditViewModel.cs
â”‚       â”‚   â”œâ”€â”€ SettingsViewModel.cs
â”‚       â”‚   â””â”€â”€ AboutViewModel.cs
â”‚       â”‚
â”‚       â”œâ”€â”€ Services/
â”‚       â”‚   â”œâ”€â”€ INotificationService.cs
â”‚       â”‚   â”œâ”€â”€ NotificationService.cs
â”‚       â”‚   â”œâ”€â”€ ITrayIconService.cs
â”‚       â”‚   â”œâ”€â”€ TrayIconService.cs
â”‚       â”‚   â”œâ”€â”€ ICsvService.cs
â”‚       â”‚   â”œâ”€â”€ CsvService.cs
â”‚       â”‚   â”œâ”€â”€ IStartupService.cs
â”‚       â”‚   â””â”€â”€ StartupService.cs
â”‚       â”‚
â”‚       â”œâ”€â”€ Repositories/
â”‚       â”‚   â”œâ”€â”€ IFriendRepository.cs
â”‚       â”‚   â”œâ”€â”€ FriendRepository.cs
â”‚       â”‚   â”œâ”€â”€ ISettingsRepository.cs
â”‚       â”‚   â”œâ”€â”€ SettingsRepository.cs
â”‚       â”‚   â””â”€â”€ AppDbContext.cs            # EF Core DbContext
â”‚       â”‚
â”‚       â”œâ”€â”€ Migrations/                     # EF Core ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚       â”‚   â”œâ”€â”€ IDatabaseMigration.cs
â”‚       â”‚   â”œâ”€â”€ Migration_001_Initial.cs
â”‚       â”‚   â””â”€â”€ MigrationRunner.cs
â”‚       â”‚
â”‚       â”œâ”€â”€ Helpers/
â”‚       â”‚   â”œâ”€â”€ DateHelper.cs
â”‚       â”‚   â”œâ”€â”€ IconSelector.cs            # é™çš„ã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
â”‚       â”‚   â”œâ”€â”€ ValidationHelper.cs
â”‚       â”‚   â””â”€â”€ CsvValidator.cs
â”‚       â”‚
â”‚       â”œâ”€â”€ Resources/
â”‚       â”‚   â”œâ”€â”€ Icons/
â”‚       â”‚   â”‚   â”œâ”€â”€ birthday.ico          # èª•ç”Ÿæ—¥ã‚±ãƒ¼ã‚­ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
â”‚       â”‚   â”‚   â”œâ”€â”€ 1.ico                 # æ•°å­—1~9
â”‚       â”‚   â”‚   â”œâ”€â”€ 2.ico
â”‚       â”‚   â”‚   â”œâ”€â”€ 3.ico
â”‚       â”‚   â”‚   â”œâ”€â”€ 4.ico
â”‚       â”‚   â”‚   â”œâ”€â”€ 5.ico
â”‚       â”‚   â”‚   â”œâ”€â”€ 6.ico
â”‚       â”‚   â”‚   â”œâ”€â”€ 7.ico
â”‚       â”‚   â”‚   â”œâ”€â”€ 8.ico
â”‚       â”‚   â”‚   â””â”€â”€ 9.ico
â”‚       â”‚   â”œâ”€â”€ Sounds/
â”‚       â”‚   â”‚   â””â”€â”€ notification.wav
â”‚       â”‚   â””â”€â”€ Strings/                   # i18nå¯¾å¿œ
â”‚       â”‚       â”œâ”€â”€ Resources.ja-JP.resx
â”‚       â”‚       â””â”€â”€ Resources.en-US.resx
â”‚       â”‚
â”‚       â””â”€â”€ Data/
â”‚           â””â”€â”€ friends.db                  # SQLite DBï¼ˆå®Ÿè¡Œæ™‚ç”Ÿæˆï¼‰
â”‚
â”œâ”€â”€ tests/
â”‚   â””â”€â”€ FriendBirthdayManager.Tests/
â”‚       â”œâ”€â”€ Models/
â”‚       â”‚   â””â”€â”€ FriendTests.cs
â”‚       â”œâ”€â”€ Services/
â”‚       â”‚   â”œâ”€â”€ NotificationServiceTests.cs
â”‚       â”‚   â””â”€â”€ CsvServiceTests.cs
â”‚       â”œâ”€â”€ Repositories/
â”‚       â”‚   â””â”€â”€ FriendRepositoryTests.cs
â”‚       â””â”€â”€ Integration/
â”‚           â””â”€â”€ DatabaseIntegrationTests.cs
â”‚
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ PLAN.md                             # æœ¬ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ ARCHITECTURE.md                     # ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è©³ç´°
â”‚   â”œâ”€â”€ DATABASE.md                         # DBè©³ç´°ä»•æ§˜
â”‚   â””â”€â”€ API.md                              # å†…éƒ¨APIä»•æ§˜
â”‚
â”œâ”€â”€ .gitignore
â”œâ”€â”€ README.md
â””â”€â”€ LICENSE                                 # MIT License
```

---

## ğŸ—“ï¸ å®Ÿè£…è¨ˆç”»ï¼ˆãƒ•ã‚§ãƒ¼ã‚ºåˆ†ã‘ãƒ»æ”¹è¨‚ç‰ˆï¼‰

### Phase 1: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºç›¤æ§‹ç¯‰ï¼ˆæœŸé–“: 2-3æ—¥ï¼‰
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆï¼ˆ.NET 8 WPFï¼‰
- [ ] NuGetãƒ‘ãƒƒã‚±ãƒ¼ã‚¸å°å…¥
  - Microsoft.EntityFrameworkCore.Sqlite
  - Hardcodet.NotifyIcon.Wpf
  - Microsoft.Toolkit.Uwp.Notifications
  - CommunityToolkit.Mvvm
  - Microsoft.Extensions.DependencyInjection
  - Serilog
  - xUnit, FluentAssertions, Moq
- [ ] ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆä½œæˆ
- [ ] DIè¨­å®šï¼ˆApp.xaml.csï¼‰
- [ ] ãƒ­ã‚°è¨­å®šï¼ˆSerilogï¼‰

**ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**: ç©ºã®ã‚¢ãƒ—ãƒªãŒèµ·å‹•ã—ã€ãƒ­ã‚°ãŒå‡ºåŠ›ã•ã‚Œã‚‹

---

### Phase 2: ãƒ‡ãƒ¼ã‚¿å±¤å®Ÿè£…ï¼ˆæœŸé–“: 3-4æ—¥ï¼‰
- [ ] Model ã‚¯ãƒ©ã‚¹ä½œæˆï¼ˆFriend, Alias, AppSettingsï¼‰
- [ ] AppDbContext å®Ÿè£…
- [ ] Repository å®Ÿè£…ï¼ˆIFriendRepository, ISettingsRepositoryï¼‰
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–å‡¦ç†
- [ ] ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½å®Ÿè£…
- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆä½œæˆï¼ˆModel, Repositoryï¼‰

**ä¾å­˜é–¢ä¿‚**: ãªã—
**ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«CRUDæ“ä½œãŒå¯èƒ½

---

### Phase 3: åŸºæœ¬UIå®Ÿè£…ï¼ˆæœŸé–“: 4-5æ—¥ï¼‰
- [ ] ç”»é¢A: ãƒ¡ã‚¤ãƒ³ç”»é¢ï¼ˆè¿½åŠ ï¼‰
- [ ] ç”»é¢B: ä¸€è¦§ç”»é¢
- [ ] ç”»é¢C: ç·¨é›†ç”»é¢
- [ ] ViewModelå®Ÿè£…ï¼ˆMVVMï¼‰
- [ ] å…¥åŠ›ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] ãƒ‡ãƒ¼ã‚¿ãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°
- [ ] ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ

**ä¾å­˜é–¢ä¿‚**: Phase 2å®Œäº†
**ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**: GUIã§å‹äººã®ç™»éŒ²ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãŒå¯èƒ½

---

### Phase 4: ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤æ©Ÿèƒ½ï¼ˆæœŸé–“: 2-3æ—¥ï¼‰
- [ ] ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤ã‚¢ã‚¤ã‚³ãƒ³è¡¨ç¤º
- [ ] å³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼
- [ ] å‹•çš„ã‚¢ã‚¤ã‚³ãƒ³ç”Ÿæˆï¼ˆSkiaSharpï¼‰
- [ ] ã‚¢ã‚¤ã‚³ãƒ³æ›´æ–°ãƒ­ã‚¸ãƒƒã‚¯

**ä¾å­˜é–¢ä¿‚**: Phase 3å®Œäº†
**ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**: ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤å¸¸é§ã€ã‚¢ã‚¤ã‚³ãƒ³ã«æ—¥æ•°è¡¨ç¤º

---

### Phase 5: é€šçŸ¥æ©Ÿèƒ½ï¼ˆæœŸé–“: 3-4æ—¥ï¼‰
- [ ] NotificationService å®Ÿè£…
- [ ] Windows ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥
- [ ] é€šçŸ¥ã‚¿ã‚¤ãƒŸãƒ³ã‚°åˆ¶å¾¡ï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¿ã‚¤ãƒãƒ¼ï¼‰
- [ ] é‡è¤‡é€šçŸ¥é˜²æ­¢ï¼ˆnotification_historyï¼‰
- [ ] éŸ³å£°é€šçŸ¥åˆ¶å¾¡
- [ ] é€šçŸ¥å¯¾è±¡åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆé€šçŸ¥å¤±æ•—æ™‚ï¼‰

**ä¾å­˜é–¢ä¿‚**: Phase 2, 4å®Œäº†
**ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**: è¨­å®šæ™‚åˆ»ã«é€šçŸ¥ãŒè¡¨ç¤ºã•ã‚Œã‚‹

---

### Phase 6: æ¤œç´¢ãƒ»ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ï¼ˆæœŸé–“: 2-3æ—¥ï¼‰
- [ ] FTS5ä»®æƒ³ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆ
- [ ] ã‚¨ã‚¤ãƒªã‚¢ã‚¹æ¤œç´¢å®Ÿè£…
- [ ] å³æ™‚æ¤œç´¢ï¼ˆãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼‰
- [ ] ä¸¦ã³æ›¿ãˆï¼ˆè¿‘ã„é †ã€æ—¥ä»˜é †ã€åå‰é †ï¼‰
- [ ] Unicodeé †ã‚½ãƒ¼ãƒˆï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ã§å®Ÿè£…ï¼‰

**ä¾å­˜é–¢ä¿‚**: Phase 3å®Œäº†
**ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**: æ¤œç´¢ãŒé«˜é€Ÿï¼ˆ1,000ä»¶ã§<100msï¼‰

---

### Phase 7: è¨­å®šæ©Ÿèƒ½ï¼ˆæœŸé–“: 2-3æ—¥ï¼‰
- [ ] ç”»é¢D: è¨­å®šç”»é¢ï¼ˆã‚¿ãƒ–UIï¼‰
- [ ] ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ç™»éŒ²ï¼ˆã‚¿ã‚¹ã‚¯ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ©ï¼‰
- [ ] ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé€šçŸ¥è¨­å®š
- [ ] CSV ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
- [ ] è¨­å®šæ°¸ç¶šåŒ–
- [ ] CSVãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

**ä¾å­˜é–¢ä¿‚**: Phase 2å®Œäº†
**ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**: CSV I/Oã€ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—ç™»éŒ²ãŒå‹•ä½œ

---

### Phase 8: ç´°éƒ¨èª¿æ•´ãƒ»UXæ”¹å–„ï¼ˆæœŸé–“: 2-3æ—¥ï¼‰
- [ ] ç”»é¢E: ã‚¯ãƒ¬ã‚¸ãƒƒãƒˆç”»é¢
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
- [ ] ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
- [ ] ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°
- [ ] ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ãƒ»ãƒ˜ãƒ«ãƒ—
- [ ] ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ
- [ ] i18nåŸºç›¤ï¼ˆãƒªã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

**ä¾å­˜é–¢ä¿‚**: Phase 1-7å®Œäº†
**ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“ãŒå‘ä¸Š

---

### Phase 9: ãƒ†ã‚¹ãƒˆï¼ˆæœŸé–“: 3-4æ—¥ï¼‰
- [ ] å˜ä½“ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%é”æˆ
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆ
- [ ] æ‰‹å‹•UIãƒ†ã‚¹ãƒˆï¼ˆå…¨æ©Ÿèƒ½ï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆ100/1,000/10,000ä»¶ï¼‰
- [ ] ã‚¨ãƒƒã‚¸ã‚±ãƒ¼ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆã†ã‚‹ã†å¹´ã€é‡è¤‡ã€etc.ï¼‰
- [ ] ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆï¼ˆCSVæ‚ªæ„ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

**ä¾å­˜é–¢ä¿‚**: Phase 1-8å®Œäº†
**ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**: ãƒã‚°0ä»¶ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›®æ¨™é”æˆï¼ˆ1,000ä»¶ < 50msã€10,000ä»¶ < 200msï¼‰

---

### Phase 10: ãƒ“ãƒ«ãƒ‰ãƒ»é…å¸ƒï¼ˆæœŸé–“: 1-2æ—¥ï¼‰
- [ ] ãƒªãƒªãƒ¼ã‚¹ãƒ“ãƒ«ãƒ‰
- [ ] å˜ä¸€å®Ÿè¡Œãƒ•ã‚¡ã‚¤ãƒ«åŒ–ï¼ˆPublishSingleFileï¼‰
- [ ] ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ãƒ¼ä½œæˆï¼ˆWiX or Inno Setupã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- [ ] READMEãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ•´å‚™
- [ ] GitHub Releaseså…¬é–‹

**ä¾å­˜é–¢ä¿‚**: Phase 9å®Œäº†
**ãƒã‚¤ãƒ«ã‚¹ãƒˆãƒ¼ãƒ³**: v1.0.0ãƒªãƒªãƒ¼ã‚¹

---

**åˆè¨ˆæœŸé–“è¦‹ç©ã‚‚ã‚Š**: 24-34æ—¥ï¼ˆç´„1ãƒ¶æœˆï¼‰

---

## ğŸ¯ é–‹ç™ºå„ªå…ˆé †ä½ï¼ˆMVPå®šç¾©ï¼‰

### é«˜å„ªå…ˆåº¦ï¼ˆMVP: Minimum Viable Productï¼‰
1. âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆãƒ»å®Ÿè£…ï¼ˆPhase 2ï¼‰
2. âœ… å‹äººç™»éŒ²ãƒ»ä¸€è¦§è¡¨ç¤ºï¼ˆPhase 3ï¼‰
3. âœ… ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤å¸¸é§ï¼ˆPhase 4ï¼‰
4. âœ… åŸºæœ¬é€šçŸ¥æ©Ÿèƒ½ï¼ˆPhase 5ï¼‰

**MVPã‚´ãƒ¼ãƒ«**: å‹äººã®èª•ç”Ÿæ—¥ã‚’ç™»éŒ²ã—ã€é€šçŸ¥ã‚’å—ã‘å–ã‚Œã‚‹

---

### ä¸­å„ªå…ˆåº¦
5. ã‚¨ã‚¤ãƒªã‚¢ã‚¹æ¤œç´¢ï¼ˆPhase 6ï¼‰
6. ç·¨é›†æ©Ÿèƒ½ï¼ˆPhase 3ï¼‰
7. è¨­å®šç”»é¢ï¼ˆPhase 7ï¼‰
8. CSV ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆPhase 7ï¼‰

---

### ä½å„ªå…ˆåº¦ï¼ˆå¾Œã§è¿½åŠ å¯èƒ½ï¼‰
9. CSV ã‚¤ãƒ³ãƒãƒ¼ãƒˆï¼ˆPhase 7ï¼‰
10. é«˜åº¦ãªä¸¦ã³æ›¿ãˆï¼ˆPhase 6ï¼‰
11. i18nå¯¾å¿œï¼ˆPhase 8ï¼‰
12. çµ±è¨ˆæƒ…å ±ï¼ˆå°†æ¥ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰

---

## ğŸ–¼ï¸ ã‚¢ã‚¤ã‚³ãƒ³ä»•æ§˜ï¼ˆæ”¹è¨‚ç‰ˆï¼‰

### ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆé™çš„ãƒ•ã‚¡ã‚¤ãƒ«ä½¿ç”¨ï¼‰

**ã‚µã‚¤ã‚º**: 16x16pxã€32x32pxã€48x48pxï¼ˆãƒãƒ«ãƒã‚µã‚¤ã‚ºICOï¼‰
**å½¢å¼**: ICOå½¢å¼ï¼ˆæ¨å¥¨ï¼‰
**é…ç½®å ´æ‰€**: `Resources/Icons/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª

**å¿…è¦ãªã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«**:
- `birthday.ico` - èª•ç”Ÿæ—¥ã‚±ãƒ¼ã‚­ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã€10æ—¥ä»¥ä¸Šå…ˆã¾ãŸã¯èª•ç”Ÿæ—¥å½“æ—¥ï¼‰
- `1.ico` - æ•°å­—1ï¼ˆ1æ—¥å‰ï¼‰
- `2.ico` - æ•°å­—2ï¼ˆ2æ—¥å‰ï¼‰
- `3.ico` - æ•°å­—3ï¼ˆ3æ—¥å‰ï¼‰
- `4.ico` - æ•°å­—4ï¼ˆ4æ—¥å‰ï¼‰
- `5.ico` - æ•°å­—5ï¼ˆ5æ—¥å‰ï¼‰
- `6.ico` - æ•°å­—6ï¼ˆ6æ—¥å‰ï¼‰
- `7.ico` - æ•°å­—7ï¼ˆ7æ—¥å‰ï¼‰
- `8.ico` - æ•°å­—8ï¼ˆ8æ—¥å‰ï¼‰
- `9.ico` - æ•°å­—9ï¼ˆ9æ—¥å‰ï¼‰

**ã‚¢ã‚¤ã‚³ãƒ³é¸æŠãƒ­ã‚¸ãƒƒã‚¯**:
```csharp
public class IconSelector
{
    private readonly Dictionary<int, Icon> _iconCache = new();
    private readonly Icon _defaultIcon;

    public IconSelector()
    {
        // ã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’äº‹å‰èª­ã¿è¾¼ã¿
        _defaultIcon = LoadIcon("Resources/Icons/birthday.ico");

        for (int i = 1; i <= 9; i++)
        {
            _iconCache[i] = LoadIcon($"Resources/Icons/{i}.ico");
        }
    }

    public Icon GetTrayIcon(int? daysUntil)
    {
        if (daysUntil.HasValue && daysUntil.Value >= 1 && daysUntil.Value <= 9)
        {
            return _iconCache[daysUntil.Value];
        }

        return _defaultIcon; // 10æ—¥ä»¥ä¸Šå…ˆã€ã¾ãŸã¯èª•ç”Ÿæ—¥å½“æ—¥ã€ã¾ãŸã¯null
    }

    private Icon LoadIcon(string path)
    {
        if (!File.Exists(path))
        {
            throw new FileNotFoundException($"Icon file not found: {path}");
        }

        return new Icon(path);
    }
}
```

**æ³¨æ„äº‹é …**:
- ã‚¢ã‚¤ã‚³ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã¯äº‹å‰ã«ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
- ã‚¢ã‚¤ã‚³ãƒ³ã¯ãƒãƒ«ãƒã‚µã‚¤ã‚ºï¼ˆ16x16, 32x32, 48x48ï¼‰ã‚’å«ã‚€ICOå½¢å¼ã‚’æ¨å¥¨
- SkiaSharpãƒ©ã‚¤ãƒ–ãƒ©ãƒªã¯ä¸è¦ã«ãªã‚Šã¾ã™ï¼ˆä¾å­˜é–¢ä¿‚ã‚’å‰Šæ¸›ï¼‰

---

## ğŸŒ å›½éš›åŒ–ï¼ˆi18nï¼‰å¯¾å¿œ

### ãƒªã‚½ãƒ¼ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
Resources/
  Strings/
    Resources.resx           (ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: æ—¥æœ¬èª)
    Resources.ja-JP.resx
    Resources.en-US.resx
```

### ä½¿ç”¨æ–¹æ³•

```csharp
// ViewModelã§ä½¿ç”¨
public string WelcomeMessage => Resources.WelcomeMessage;

// XAMLã§ä½¿ç”¨
<TextBlock Text="{x:Static resources:Resources.WelcomeMessage}" />
```

### å¯¾å¿œè¨€èªï¼ˆå°†æ¥ï¼‰
- æ—¥æœ¬èªï¼ˆja-JPï¼‰: v1.0ã§å¯¾å¿œ
- è‹±èªï¼ˆen-USï¼‰: v1.1ã§å¯¾å¿œäºˆå®š

---

## ğŸ“ ãƒ­ã‚°æˆ¦ç•¥

### Serilogè¨­å®š

```csharp
Log.Logger = new LoggerConfiguration()
    .MinimumLevel.Information()
    .MinimumLevel.Override("Microsoft", LogEventLevel.Warning)
    .Enrich.FromLogContext()
    .WriteTo.File(
        "logs/app.log",
        rollingInterval: RollingInterval.Day,
        retainedFileCountLimit: 7,
        outputTemplate: "{Timestamp:yyyy-MM-dd HH:mm:ss.fff} [{Level:u3}] {Message:lj}{NewLine}{Exception}"
    )
    .CreateLogger();
```

### ãƒ­ã‚°ãƒ¬ãƒ™ãƒ«
- **Verbose**: è©³ç´°ãªãƒ‡ãƒãƒƒã‚°æƒ…å ±
- **Debug**: é–‹ç™ºæ™‚ã®ãƒ‡ãƒãƒƒã‚°æƒ…å ±
- **Information**: é€šå¸¸ã®å‹•ä½œãƒ­ã‚°ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
- **Warning**: è­¦å‘Šï¼ˆé€šçŸ¥å¤±æ•—ãªã©ï¼‰
- **Error**: ã‚¨ãƒ©ãƒ¼ï¼ˆä¾‹å¤–ç™ºç”Ÿï¼‰
- **Fatal**: è‡´å‘½çš„ã‚¨ãƒ©ãƒ¼ï¼ˆã‚¢ãƒ—ãƒªã‚¯ãƒ©ãƒƒã‚·ãƒ¥ï¼‰

### ãƒ­ã‚°å‡ºåŠ›ä¾‹

```csharp
_logger.LogInformation("Friend added: {FriendName}, Birthday: {Birthday}", friend.Name, friend.Birthday);
_logger.LogWarning("Notification failed for friend {FriendId}, retry count: {RetryCount}", friendId, retryCount);
_logger.LogError(ex, "Database operation failed");
```

---

## âš ï¸ æ³¨æ„äº‹é …ãƒ»åˆ¶ç´„ï¼ˆæ”¹è¨‚ç‰ˆï¼‰

### 1. é‡è¤‡ç™»éŒ²åˆ¶å¾¡

**åŸºæœ¬æ–¹é‡**:
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆ¶ç´„ã§ã¯ãªãã€**ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã§åˆ¶å¾¡**
- åŒååŒèª•ç”Ÿæ—¥ã®å‹äººãŒæ—¢ã«å­˜åœ¨ã™ã‚‹å ´åˆã€ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã‚’è¡¨ç¤º
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒè¨±å¯ã™ã‚Œã°é‡è¤‡ç™»éŒ²å¯èƒ½ï¼ˆãƒ¡ãƒ¢ã‚„ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§åŒºåˆ¥ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ï¼‰

#### æ–°è¦ç™»éŒ²æ™‚ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯

```csharp
public async Task<bool> AddAsync(Friend friend)
{
    // åŒååŒèª•ç”Ÿæ—¥ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ¤œç´¢
    // NOTE: SQLã§ã¯NULL == NULLã¯falseã«ãªã‚‹ãŸã‚ã€NULLå€¤ã®æ¯”è¼ƒã¯å€‹åˆ¥ã«å‡¦ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
    var duplicate = await _context.Friends
        .Where(f => f.Name == friend.Name
                 && (f.BirthYear == friend.BirthYear || (f.BirthYear == null && friend.BirthYear == null))
                 && (f.BirthMonth == friend.BirthMonth || (f.BirthMonth == null && friend.BirthMonth == null))
                 && (f.BirthDay == friend.BirthDay || (f.BirthDay == null && friend.BirthDay == null)))
        .FirstOrDefaultAsync();

    if (duplicate != null)
    {
        var birthdayStr = friend.GetBirthdayDisplayString();
        var result = await ShowConfirmationDialog(
            $"{friend.Name}ï¼ˆ{birthdayStr}ï¼‰ãŒæ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚\n" +
            "åŒååŒèª•ç”Ÿæ—¥ã®åˆ¥äººã¨ã—ã¦ç™»éŒ²ã™ã‚‹å ´åˆã¯ã€ãƒ¡ãƒ¢ã‚„ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§åŒºåˆ¥ã—ã¦ãã ã•ã„ã€‚\n" +
            "ç™»éŒ²ã—ã¾ã™ã‹ï¼Ÿ"
        );

        if (!result) return false;  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«
    }

    // ç™»éŒ²å‡¦ç†
    _context.Friends.Add(friend);
    await _context.SaveChangesAsync();
    return true;
}
```

#### æ›´æ–°æ™‚ã®é‡è¤‡ãƒã‚§ãƒƒã‚¯

**é‡è¦**: æ›´æ–°æ™‚ã¯**è‡ªåˆ†è‡ªèº«ï¼ˆåŒã˜IDï¼‰ã‚’é™¤å¤–**ã—ã¦ãƒã‚§ãƒƒã‚¯ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

**å•é¡Œã¨ãªã‚‹ã‚±ãƒ¼ã‚¹**:
```
åˆæœŸçŠ¶æ…‹:
  ID=1: å±±ç”°å¤ªéƒ, BirthYear=2000, BirthMonth=5, BirthDay=5
  ID=2: å±±ç”°å¤ªéƒ, BirthYear=2000, BirthMonth=5, BirthDay=4

ID=2ã‚’ç·¨é›†ã—ã¦BirthDay=5ã«å¤‰æ›´ã—ãŸå ´åˆ:
  â†’ ID=1ã¨åŒååŒèª•ç”Ÿæ—¥ã«ãªã£ã¦ã—ã¾ã†
```

**å®Ÿè£…ä¾‹**:
```csharp
public async Task<bool> UpdateAsync(Friend friend)
{
    // è‡ªåˆ†è‡ªèº«ã‚’é™¤å¤–ã—ã¦åŒååŒèª•ç”Ÿæ—¥ã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã‚’æ¤œç´¢
    // NOTE: SQLã§ã¯NULL == NULLã¯falseã«ãªã‚‹ãŸã‚ã€NULLå€¤ã®æ¯”è¼ƒã¯å€‹åˆ¥ã«å‡¦ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚‹
    var duplicate = await _context.Friends
        .Where(f => f.Id != friend.Id)  // ğŸ‘ˆ è‡ªåˆ†è‡ªèº«ã‚’é™¤å¤–
        .Where(f => f.Name == friend.Name
                 && (f.BirthYear == friend.BirthYear || (f.BirthYear == null && friend.BirthYear == null))
                 && (f.BirthMonth == friend.BirthMonth || (f.BirthMonth == null && friend.BirthMonth == null))
                 && (f.BirthDay == friend.BirthDay || (f.BirthDay == null && friend.BirthDay == null)))
        .FirstOrDefaultAsync();

    if (duplicate != null)
    {
        var birthdayStr = friend.GetBirthdayDisplayString();
        var result = await ShowConfirmationDialog(
            $"{friend.Name}ï¼ˆ{birthdayStr}ï¼‰ãŒæ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™ï¼ˆID={duplicate.Id}ï¼‰ã€‚\n" +
            "åŒååŒèª•ç”Ÿæ—¥ã«ãªã‚Šã¾ã™ãŒã€æ›´æ–°ã—ã¾ã™ã‹ï¼Ÿ"
        );

        if (!result) return false;  // ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã‚­ãƒ£ãƒ³ã‚»ãƒ«
    }

    // æ›´æ–°å‡¦ç†
    _context.Friends.Update(friend);
    await _context.SaveChangesAsync();
    return true;
}
```

#### ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

```csharp
[Fact]
public async Task UpdateAsync_WhenCreatingDuplicate_ShowsConfirmation()
{
    // Arrange
    var friend1 = new Friend
    {
        Id = 1,
        Name = "å±±ç”°å¤ªéƒ",
        BirthYear = 2000,
        BirthMonth = 5,
        BirthDay = 5
    };
    var friend2 = new Friend
    {
        Id = 2,
        Name = "å±±ç”°å¤ªéƒ",
        BirthYear = 2000,
        BirthMonth = 5,
        BirthDay = 4
    };
    await _repository.AddAsync(friend1);
    await _repository.AddAsync(friend2);

    // Act: friend2ã®èª•ç”Ÿæ—¥ã‚’friend1ã¨åŒã˜ã«ã™ã‚‹
    friend2.BirthDay = 5;
    var result = await _repository.UpdateAsync(friend2);

    // Assert: ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã¹ã
    _mockDialog.Verify(x => x.ShowConfirmationDialog(It.IsAny<string>()), Times.Once);
}

[Fact]
public async Task UpdateAsync_WhenNotCreatingDuplicate_NoConfirmation()
{
    // Arrange
    var friend = new Friend
    {
        Id = 1,
        Name = "å±±ç”°å¤ªéƒ",
        BirthYear = 2000,
        BirthMonth = 5,
        BirthDay = 5
    };
    await _repository.AddAsync(friend);

    // Act: è‡ªåˆ†è‡ªèº«ã®èª•ç”Ÿæ—¥ã‚’å¤‰æ›´ï¼ˆé‡è¤‡ã«ãªã‚‰ãªã„ï¼‰
    friend.BirthDay = 6;
    var result = await _repository.UpdateAsync(friend);

    // Assert: ç¢ºèªãƒ€ã‚¤ã‚¢ãƒ­ã‚°ã¯è¡¨ç¤ºã•ã‚Œãªã„
    _mockDialog.Verify(x => x.ShowConfirmationDialog(It.IsAny<string>()), Times.Never);
}
```

### 2. èª•ç”Ÿæ—¥å…¥åŠ›ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨é€šçŸ¥å¯å¦

| ãƒ‘ã‚¿ãƒ¼ãƒ³ | DBä¿å­˜ä¾‹ | é€šçŸ¥ | å‚™è€ƒ |
|---------|---------|------|------|
| å¹´æœˆæ—¥ | BirthYear=2000, BirthMonth=5, BirthDay=15 | âœ… | æ¯å¹´5æœˆ15æ—¥ã«é€šçŸ¥ |
| æœˆæ—¥ã®ã¿ | BirthYear=NULL, BirthMonth=5, BirthDay=15 | âœ… | æ¯å¹´5æœˆ15æ—¥ã«é€šçŸ¥ |
| å¹´ã®ã¿ | BirthYear=2000, BirthMonth=NULL, BirthDay=NULL | âŒ | é€šçŸ¥ãªã—ã€ã€Œ2000å¹´ç”Ÿã¾ã‚Œã€ã‚’è¨˜éŒ²å¯èƒ½ |
| æœˆã®ã¿ | BirthYear=NULL, BirthMonth=5, BirthDay=NULL | âŒ | é€šçŸ¥ãªã—ã€ã€Œ5æœˆç”Ÿã¾ã‚Œã€ã‚’è¨˜éŒ²å¯èƒ½ |
| æ—¥ã®ã¿ | BirthYear=NULL, BirthMonth=NULL, BirthDay=15 | âŒ | é€šçŸ¥ãªã—ã€ã€Œ15æ—¥ç”Ÿã¾ã‚Œã€ã‚’è¨˜éŒ²å¯èƒ½ |
| æœªå…¥åŠ› | å…¨ã¦NULL | âŒ | é€šçŸ¥ãªã—ã€ä¸€è¦§ã§ã¯æœ€å¾Œã«è¡¨ç¤º |

**é‡è¦**: é€šçŸ¥ãŒè¡Œã‚ã‚Œã‚‹ã®ã¯ã€ŒBirthMonth ã¨ BirthDay ã®ä¸¡æ–¹ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆã®ã¿ã€

**è§£æ±ºã•ã‚ŒãŸå•é¡Œ**:
- âœ… ã€Œ5æœˆç”Ÿã¾ã‚Œã€(BirthMonth=5, BirthDay=NULL) ã¨ã€Œ5æ—¥ç”Ÿã¾ã‚Œã€(BirthMonth=NULL, BirthDay=5) ãŒæ˜ç¢ºã«åŒºåˆ¥ã§ãã‚‹
- âœ… ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ¬ãƒ™ãƒ«ã§æ›–æ˜§æ€§ãŒæ’é™¤ã•ã‚ŒãŸ
- âœ… CHECKåˆ¶ç´„ã«ã‚ˆã‚Šä¸æ­£ãªå€¤ï¼ˆmonth=13ãªã©ï¼‰ã‚’é˜²æ­¢

#### éƒ¨åˆ†å…¥åŠ›æ©Ÿèƒ½ã®èƒŒæ™¯ã¨å¿…è¦æ€§

**ãªãœéƒ¨åˆ†å…¥åŠ›ãŒå¿…è¦ã‹**:

ç¾å®Ÿã®äººé–“é–¢ä¿‚ã§ã¯ã€å®Œå…¨ãªèª•ç”Ÿæ—¥æƒ…å ±ã‚’å¾—ã‚‰ã‚Œãªã„ã‚±ãƒ¼ã‚¹ãŒå¤šãå­˜åœ¨ã—ã¾ã™ã€‚ã“ã®æ©Ÿèƒ½ã¯ã€ãã†ã—ãŸ**å®Ÿéš›ã®ç¤¾äº¤çŠ¶æ³ã«å¯¾å¿œ**ã™ã‚‹ãŸã‚ã«è¨­è¨ˆã•ã‚Œã¾ã—ãŸã€‚

**å…¸å‹çš„ãªã‚·ãƒŠãƒªã‚ª**:

1. **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã¸ã®é…æ…®**
   - ã€Œèª•ç”Ÿæ—¥ã„ã¤ï¼Ÿã€â†’ã€Œ5æœˆã ã‘ã©ã€æ—¥ã¯ç§˜å¯†ã€
   - å®Œå…¨ãªæ—¥ä»˜ã‚’æ•™ãˆãŸããªã„å‹äººã‚‚ã€éƒ¨åˆ†çš„ãªæƒ…å ±ãªã‚‰å…±æœ‰ã—ã¦ãã‚Œã‚‹

2. **æƒ…å ±ã®æ®µéšçš„ãªå–å¾—**
   - åˆå¯¾é¢: ã€Œä½•å¹´ç”Ÿã¾ã‚Œï¼Ÿã€â†’ã€Œ2000å¹´ã§ã™ã€ï¼ˆå¹´ã®ã¿ï¼‰
   - å¾Œæ—¥: ã€Œèª•ç”Ÿæœˆã¯ï¼Ÿã€â†’ã€Œ5æœˆã€ï¼ˆæœˆã‚’è¿½åŠ ã€å¹´æœˆãŒæƒã†ï¼‰
   - ã•ã‚‰ã«å¾Œ: ã€Œä½•æ—¥ï¼Ÿã€â†’ã€Œ15æ—¥ã€ï¼ˆå®Œå…¨ãªæ—¥ä»˜ã«ãªã‚Šã€é€šçŸ¥å¯èƒ½ã«ï¼‰
   - **æ®µéšçš„ã«æƒ…å ±ã‚’æ›´æ–°ã§ãã‚‹ã“ã¨ã§ã€è‡ªç„¶ãªã‚³ãƒŸãƒ¥ãƒ‹ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¯èƒ½**

3. **è¨˜æ†¶ãŒæ›–æ˜§ãªå ´åˆ**
   - ã€Œç¢ºã‹5æœˆç”Ÿã¾ã‚Œã ã£ãŸã¨æ€ã†ã‘ã©ã€æ—¥ã¯è¦šãˆã¦ãªã„ã€
   - éƒ¨åˆ†çš„ãªæƒ…å ±ã§ã‚‚è¨˜éŒ²ã—ã¦ãŠã‘ã°ã€å¾Œã§æ­£ç¢ºãªæƒ…å ±ã‚’å¾—ãŸã¨ãã«æ›´æ–°å¯èƒ½

4. **å¹´é½¢ã ã‘ã‚’çŸ¥ã‚ŠãŸã„å ´åˆ**
   - ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ã®ãƒ•ãƒ¬ãƒ³ãƒ‰: ã€Œä½•æ­³ï¼Ÿã€â†’ã€Œ24æ­³ï¼ˆ2000å¹´ç”Ÿã¾ã‚Œï¼‰ã€
   - èª•ç”Ÿæ—¥é€šçŸ¥ã¯ä¸è¦ã ãŒã€å¹´é½¢ãƒ»ä¸–ä»£ã®æƒ…å ±ã¨ã—ã¦è¨˜éŒ²ã—ãŸã„

5. **èª•ç”Ÿæ—¥éå…¬é–‹æ–‡åŒ–ã¸ã®å¯¾å¿œ**
   - ä¸€éƒ¨ã®ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã§ã¯å®Œå…¨ãªèª•ç”Ÿæ—¥ã‚’å…¬é–‹ã—ãªã„æ–‡åŒ–ãŒã‚ã‚‹
   - ãã‚Œã§ã‚‚ã€ŒåŒã˜æœˆç”Ÿã¾ã‚Œã ã­ï¼ã€ãªã©ã®ä¼šè©±ã®ãŸã‚ã«æœˆã ã‘å…±æœ‰ã™ã‚‹

**è¨­è¨ˆå“²å­¦**:

- **å®Œç’§ä¸»ç¾©ã‚’é¿ã‘ã‚‹**: ã€Œå®Œå…¨ãªæƒ…å ±ãŒãªã„ã¨ç™»éŒ²ã§ããªã„ã€ã¨ã„ã†åˆ¶ç´„ã¯ã€å®Ÿç”¨æ€§ã‚’æãªã†
- **æŸ”è»Ÿæ€§ã®æä¾›**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¾—ã‚‰ã‚ŒãŸæƒ…å ±ã®ç¯„å›²ã§ç™»éŒ²ã§ãã€å¾Œã‹ã‚‰è¿½åŠ ãƒ»æ›´æ–°å¯èƒ½
- **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ã®å°Šé‡**: å‹äººãŒå…¨æƒ…å ±ã‚’å…±æœ‰ã—ãŸããªã„å ´åˆã«ã‚‚å¯¾å¿œ
- **æ®µéšçš„ãªæƒ…å ±åé›†**: æ™‚é–“ã‚’ã‹ã‘ã¦æƒ…å ±ã‚’å……å®Ÿã•ã›ã¦ã„ãã‚¹ã‚¿ã‚¤ãƒ«ã‚’ã‚µãƒãƒ¼ãƒˆ

**æŠ€è¡“çš„ãªå®Ÿè£…ãƒã‚¤ãƒ³ãƒˆ**:

- éƒ¨åˆ†å…¥åŠ›ã¯é€šçŸ¥ã®å¯¾è±¡å¤–ï¼ˆæœˆæ—¥ãŒå¿…è¦ï¼‰ã ãŒã€ä¸€è¦§ç”»é¢ã§ã¯è¡¨ç¤ºã•ã‚Œã‚‹
- å¾Œã‹ã‚‰æƒ…å ±ã‚’è¿½åŠ ã—ã¦ã€Œæœˆæ—¥ã€ãŒæƒãˆã°ã€è‡ªå‹•çš„ã«é€šçŸ¥å¯¾è±¡ã«ãªã‚‹
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã¯æ–‡å­—åˆ—ã¨ã—ã¦æŸ”è»Ÿã«ä¿å­˜ï¼ˆ"2000", "05", "15", "05-15", "2000-05-15"ï¼‰

**ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ä¾‹**:

| ã‚·ãƒãƒ¥ã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ | å–å¾—ã§ããŸæƒ…å ± | ç™»éŒ²å†…å®¹ | å¾Œã®å±•é–‹ |
|-----------------|---------------|---------|---------|
| ã‚ªãƒ³ãƒ©ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ã§çŸ¥ã‚Šåˆã£ãŸ | ã€Œ2000å¹´ç”Ÿã¾ã‚Œã§ã™ã€ | å¹´ã®ã¿ç™»éŒ² | è¦ªã—ããªã£ãŸã‚‰æœˆæ—¥ã‚’èã |
| é£²ã¿ä¼šã§è»½ãèã„ãŸ | ã€Œ5æœˆç”Ÿã¾ã‚Œã§ã™ã€ | æœˆã®ã¿ç™»éŒ² | æ¬¡ã«ä¼šã£ãŸã¨ãæ—¥ã‚’ç¢ºèª |
| ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼é‡è¦–ã®å‹äºº | ã€Œ15æ—¥ã ã‘ã©å¹´ã¯ç§˜å¯†ã€ | æ—¥ã®ã¿ç™»éŒ² | æœ¬äººãŒæœ›ã¾ãªã„é™ã‚Šå¹´æœˆã¯èã‹ãªã„ |
| SNSã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‹ã‚‰ | ã€Œ5æœˆ15æ—¥ã€ | æœˆæ—¥ç™»éŒ²ï¼ˆé€šçŸ¥å¯èƒ½ï¼‰ | èª•ç”Ÿæ—¥é€šçŸ¥ãŒå±Šã |

**çµè«–**: ã“ã®æ©Ÿèƒ½ã¯ã€å®Œç’§ãªæƒ…å ±ã‚’å¼·åˆ¶ã›ãšã€**ç¾å®Ÿã®äººé–“é–¢ä¿‚ã®å¤šæ§˜æ€§ã«å¯¾å¿œã™ã‚‹**ãŸã‚ã®ã‚‚ã®ã§ã™ã€‚

### 3. æ—¥ä»˜è¨ˆç®—
- **ã†ã‚‹ã†å¹´å¯¾å¿œå¿…é ˆ**
  - 2æœˆ29æ—¥ç”Ÿã¾ã‚Œ â†’ å¹³å¹´ã¯2æœˆ28æ—¥ã«é€šçŸ¥
  - `DateTime.IsLeapYear()` ä½¿ç”¨

### 4. ä¸¦ã³æ›¿ãˆã€Œä»Šæ—¥ã‹ã‚‰è¿‘ã„é †ã€ã®è©³ç´°

```
ä¾‹: ä»Šæ—¥ãŒ 11æœˆ14æ—¥ã®å ´åˆ

1. 11æœˆ15æ—¥ï¼ˆã‚ã¨1æ—¥ï¼‰
2. 11æœˆ20æ—¥ï¼ˆã‚ã¨6æ—¥ï¼‰
3. 12æœˆ1æ—¥ï¼ˆã‚ã¨17æ—¥ï¼‰
4. 1æœˆ5æ—¥ï¼ˆã‚ã¨52æ—¥ï¼‰
5. 10æœˆ1æ—¥ï¼ˆã‚ã¨321æ—¥ï¼‰ â† æ¥å¹´ã®èª•ç”Ÿæ—¥
6. ä½è—¤èŠ±å­ï¼ˆ5æœˆã®ã¿ï¼‰--- â† èª•ç”Ÿæ—¥æœªè¨­å®šãƒ»éƒ¨åˆ†å…¥åŠ›ã¯æœ€å¾Œï¼ˆåå‰é †ã§ã‚½ãƒ¼ãƒˆï¼‰
7. éˆ´æœ¨ä¸€éƒï¼ˆ2000å¹´ã®ã¿ï¼‰---
8. ç”°ä¸­æ¬¡éƒï¼ˆæœªè¨­å®šï¼‰---
```

**ä¸¦ã³æ›¿ãˆãƒ«ãƒ¼ãƒ«**:
- **è¿‘ã„é †**: èª•ç”Ÿæ—¥ã¾ã§ã®æ—¥æ•°ï¼ˆæ˜‡é †ï¼‰â†’ åŒæ—¥ã®å ´åˆã¯åå‰é †ï¼ˆUnicodeé †ï¼‰
- **æ—¥ä»˜é †**: æœˆæ—¥ï¼ˆ1æœˆ1æ—¥â†’12æœˆ31æ—¥ï¼‰â†’ åŒæ—¥ã®å ´åˆã¯åå‰é †
- **åå‰é †**: Unicodeé †ï¼ˆC#ã®string.Compareä½¿ç”¨ï¼‰
- **èª•ç”Ÿæ—¥æœªè¨­å®šãƒ»éƒ¨åˆ†å…¥åŠ›**: å¸¸ã«æœ€å¾Œã«è¡¨ç¤ºã—ã€åå‰é †ã§ã‚½ãƒ¼ãƒˆ

### 5. CSV ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ

è©³ç´°ã¯ã€Œ## ğŸ“„ CSVä»•æ§˜ï¼ˆæ˜ç¢ºåŒ–ç‰ˆï¼‰ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ğŸš€ é–‹ç™ºé–‹å§‹æ‰‹é †

### 1. ç’°å¢ƒæº–å‚™

```bash
# .NET 8 SDK ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ç¢ºèª
dotnet --version  # 8.0.xä»¥ä¸Š

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
dotnet new wpf -n FriendBirthdayManager -f net8.0-windows
cd FriendBirthdayManager

# NuGetãƒ‘ãƒƒã‚±ãƒ¼ã‚¸è¿½åŠ 
dotnet add package Microsoft.EntityFrameworkCore.Sqlite
dotnet add package Microsoft.Extensions.DependencyInjection
dotnet add package Hardcodet.NotifyIcon.Wpf
dotnet add package Microsoft.Toolkit.Uwp.Notifications
dotnet add package CommunityToolkit.Mvvm
dotnet add package Serilog.Sinks.File

# ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä½œæˆ
dotnet new xunit -n FriendBirthdayManager.Tests
dotnet add FriendBirthdayManager.Tests package FluentAssertions
dotnet add FriendBirthdayManager.Tests package Moq
```

### 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–

```bash
# EF Core ãƒ„ãƒ¼ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
dotnet tool install --global dotnet-ef

# åˆæœŸãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ä½œæˆ
dotnet ef migrations add InitialCreate
dotnet ef database update
```

### 3. é–‹ç™ºç’°å¢ƒ

- **æ¨å¥¨IDE**: Visual Studio 2022 / JetBrains Rider / Visual Studio Code
- **æ‹¡å¼µæ©Ÿèƒ½**:
  - C# Dev Kit (VS Code)
  - ReSharper (Visual Studio)

---

## ğŸ“š å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

### å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [WPF Documentation](https://learn.microsoft.com/ja-jp/dotnet/desktop/wpf/)
- [Entity Framework Core](https://learn.microsoft.com/ja-jp/ef/core/)
- [SQLite FTS5](https://www.sqlite.org/fts5.html)
- [Windows Notifications](https://learn.microsoft.com/ja-jp/windows/apps/design/shell/tiles-and-notifications/adaptive-interactive-toasts)

### ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- [Hardcodet NotifyIcon WPF](https://github.com/hardcodet/wpf-notifyicon)
- [CommunityToolkit MVVM](https://learn.microsoft.com/ja-jp/dotnet/communitytoolkit/mvvm/)
- [Serilog](https://serilog.net/)

---

## âœ… å®Œæˆã‚¤ãƒ¡ãƒ¼ã‚¸

### ã‚´ãƒ¼ãƒ«
- âœ… ã‚¿ã‚¹ã‚¯ãƒˆãƒ¬ã‚¤ã«å¸¸é§ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ„è­˜ã›ãšã«ä½¿ãˆã‚‹
- âœ… å‹äººã®èª•ç”Ÿæ—¥ã‚’å¿˜ã‚Œãªã„ä»•çµ„ã¿
- âœ… ã‚·ãƒ³ãƒ—ãƒ«ã§ç›´æ„Ÿçš„ãªUI
- âœ… è»½é‡ã§é«˜é€Ÿå‹•ä½œï¼ˆèµ·å‹•3ç§’ä»¥å†…ã€10,000ä»¶ã§æ¤œç´¢ < 200msï¼‰
- âœ… ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š
- âœ… ã‚»ã‚­ãƒ¥ã‚¢ã§å®‰å…¨ï¼ˆSQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–ã€CSVæ¤œè¨¼ï¼‰

### æˆåŠŸæŒ‡æ¨™
- [x] 10,000ä»¶ã®å‹äººã‚’ç™»éŒ²ã—ã¦ã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã«å‹•ä½œï¼ˆæ¤œç´¢ < 200msï¼‰
- [x] é€šçŸ¥ãŒç¢ºå®Ÿã«å±Šãï¼ˆå¤±æ•—æ™‚ã¯ãƒªãƒˆãƒ©ã‚¤ï¼†ãƒ­ã‚°è¨˜éŒ²ï¼‰
- [x] ã‚¨ã‚¤ãƒªã‚¢ã‚¹æ¤œç´¢ãŒé«˜é€Ÿï¼ˆFTS5ä½¿ç”¨ï¼‰
- [x] ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©å…ƒãŒç°¡å˜ï¼ˆCSV I/Oï¼‰
- [x] å˜ä½“ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸80%ä»¥ä¸Š

---

**ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆæ—¥**: 2025-11-14
**æ”¹è¨‚æ—¥**: 2025-11-14
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 3.0ï¼ˆDBæ§‹é€ æ”¹è¨‚ç‰ˆï¼‰
**ä½œæˆè€…**: Claude (Anthropic)
**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚ªãƒ¼ãƒŠãƒ¼**: ãˆã‚Šã‚“ã (@eringi_vrc)
**ãƒ©ã‚¤ã‚»ãƒ³ã‚¹**: MIT License

---

## æ”¹è¨‚å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ |
|----------|------|---------|
| 1.0 | 2025-11-14 | åˆç‰ˆä½œæˆ |
| 2.0 | 2025-11-14 | å…¨é¢æ”¹è¨‚ï¼ˆDBæ­£è¦åŒ–ã€FTS5ã€DIã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã€ãƒ†ã‚¹ãƒˆå¼·åŒ–ï¼‰ |
| 2.1 | 2025-11-14 | éƒ¨åˆ†å…¥åŠ›å¯¾å¿œï¼ˆå¹´ã®ã¿ã€æœˆã®ã¿ã€æ—¥ã®ã¿ã®ç™»éŒ²ãŒå¯èƒ½ã«ï¼‰ |
| 2.2 | 2025-11-14 | é‡è¤‡ç™»éŒ²åˆ¶å¾¡ã®è©³ç´°åŒ–ï¼ˆæ–°è¦ç™»éŒ²æ™‚ãƒ»æ›´æ–°æ™‚ã®å‡¦ç†ã‚’æ˜ç¢ºåŒ–ã€ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¿½åŠ ï¼‰ |
| 3.0 | 2025-11-14 | **DBæ§‹é€ æ”¹è¨‚**: birthday TEXT â†’ birth_year, birth_month, birth_day INTEGER ã«åˆ†å‰²ï¼ˆæ›–æ˜§æ€§æ’é™¤ï¼‰ |

---

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. âœ… **ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ãƒ¬ãƒ“ãƒ¥ãƒ¼å®Œäº†**
2. **ã‚¢ã‚¤ã‚³ãƒ³ç”»åƒã‚’æº–å‚™**ï¼ˆ10å€‹ã®ICOãƒ•ã‚¡ã‚¤ãƒ«: birthday.ico, 1.icoï½9.icoï¼‰
3. **Phase 1ï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºç›¤æ§‹ç¯‰ï¼‰ã‚’é–‹å§‹**
4. GitHub ãƒªãƒã‚¸ãƒˆãƒªä½œæˆã€ãƒ–ãƒ©ãƒ³ãƒé‹ç”¨ãƒ«ãƒ¼ãƒ«æ±ºå®š

**è³ªå•ã‚„æ‡¸å¿µäº‹é …ãŒã‚ã‚Œã°ã€ãŠæ°—è»½ã«ãŠèããã ã•ã„ï¼**
